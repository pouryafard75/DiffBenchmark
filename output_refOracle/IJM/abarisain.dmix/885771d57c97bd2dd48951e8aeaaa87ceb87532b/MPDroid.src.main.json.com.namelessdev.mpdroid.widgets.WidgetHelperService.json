{
  "matchedElements" : [
 {
    "left" : "",
    "right" : "",
    "info" : "TypeDeclaration[903-2252]:TypeDeclaration[965-2217]"
  }, {
    "left" : "public static final String CMD_UPDATE_WIDGET = \"UPDATE_WIDGET\";",
    "right" : "public static final String CMD_UPDATE_WIDGET = \"UPDATE_WIDGET\";",
    "info" : "FieldDeclaration[965-1028]:FieldDeclaration[1027-1090]"
  }, {
    "left" : "static final String TAG = \"MPDroidWidgetHelperService\";",
    "right" : "static final String TAG = \"MPDroidWidgetHelperService\";",
    "info" : "FieldDeclaration[1034-1089]:FieldDeclaration[1096-1151]"
  }, {
    "left" : "private final MPDApplication mApp = MPDApplication.getInstance();",
    "right" : "private final MPDApplication mApp = MPDApplication.getInstance();",
    "info" : "FieldDeclaration[1095-1160]:FieldDeclaration[1157-1222]"
  }, {
    "left" : "private boolean mPlaying = false;",
    "right" : "private boolean mPlaying;",
    "info" : "FieldDeclaration[1166-1199]:FieldDeclaration[1228-1253]"
  }, {
    "left" : "public WidgetHelperService() {\n        super(TAG);\n    }",
    "right" : "public WidgetHelperService() {\n        super(TAG);\n    }",
    "info" : "MethodDeclaration[1205-1261]:MethodDeclaration[1259-1315]"
  }, {
    "left" : "public boolean isPlaying() {\n        return mPlaying;\n    }",
    "right" : "public boolean isPlaying() {\n        return mPlaying;\n    }",
    "info" : "MethodDeclaration[1267-1326]:MethodDeclaration[1321-1380]"
  }, {
    "left" : "@Override\n    protected void onHandleIntent(final Intent intent) {\n        // get MPD connection\n        mApp.addConnectionLock(this);\n\n        // prepare values for runnable\n        final MPD mpd = mApp.getMPD();\n        final String action = intent.getAction();\n\n        // schedule real work\n        mApp.getAsyncHelper().execAsync(new Runnable() {\n            @Override\n            public void run() {\n                processIntent(action, mpd);\n            }\n        });\n\n        // clean up\n        mApp.removeConnectionLock(this);\n    }",
    "right" : "@Override\n    protected void onHandleIntent(final Intent intent) {\n        final String action = intent.getAction();\n        final MPDStatus status = mApp.getMPD().getStatus();\n\n        switch (action) {\n            case CMD_UPDATE_WIDGET:\n                mPlaying = status.isState(MPDStatusMap.STATE_PLAYING);\n                SimpleWidgetProvider.getInstance().notifyChange(this);\n                break;\n            default:\n                if (status.isValid()) {\n                    MPDControl.run(action);\n                } else {\n                    final Object token = MPDControl.setupConnection(5L, TimeUnit.SECONDS);\n\n                    if (token != null) {\n                        MPDControl.run(action);\n                        mApp.removeConnectionLock(token);\n                    }\n                }\n        }\n    }",
    "info" : "MethodDeclaration[1332-1875]:MethodDeclaration[1386-2215]"
  } ],
  "mappings" : [
 {
    "left" : "import com.anpmech.mpd.MPD;",
    "right" : "import com.anpmech.mpd.subsystem.status.MPDStatus;",
    "info" : "ImportDeclaration[656-683]:ImportDeclaration[656-706]"
  }, {
    "left" : "public",
    "right" : "public",
    "info" : "Modifier[903-909]:Modifier[965-971]"
  }, {
    "left" : "IntentService",
    "right" : "IntentService",
    "info" : "SimpleType[944-957]:SimpleType[1006-1019]"
  }, {
    "left" : "public",
    "right" : "public",
    "info" : "Modifier[1205-1211]:Modifier[1259-1265]"
  }, {
    "left" : "{}",
    "right" : "{}",
    "info" : "Block[1234-1261]:Block[1288-1315]"
  }, {
    "left" : "super(TAG);",
    "right" : "super(TAG);",
    "info" : "SuperConstructorInvocation[1244-1255]:SuperConstructorInvocation[1298-1309]"
  }, {
    "left" : "public",
    "right" : "public",
    "info" : "Modifier[1267-1273]:Modifier[1321-1327]"
  }, {
    "left" : "boolean",
    "right" : "boolean",
    "info" : "PrimitiveType[1274-1281]:PrimitiveType[1328-1335]"
  }, {
    "left" : "{}",
    "right" : "{}",
    "info" : "Block[1294-1326]:Block[1348-1380]"
  }, {
    "left" : "return mPlaying;",
    "right" : "return mPlaying;",
    "info" : "ReturnStatement[1304-1320]:ReturnStatement[1358-1374]"
  }, {
    "left" : "@Override",
    "right" : "@Override",
    "info" : "MarkerAnnotation[1332-1341]:MarkerAnnotation[1386-1395]"
  }, {
    "left" : "protected",
    "right" : "protected",
    "info" : "Modifier[1346-1355]:Modifier[1400-1409]"
  }, {
    "left" : "void",
    "right" : "void",
    "info" : "PrimitiveType[1356-1360]:PrimitiveType[1410-1414]"
  }, {
    "left" : "final Intent intent",
    "right" : "final Intent intent",
    "info" : "SingleVariableDeclaration[1376-1395]:SingleVariableDeclaration[1430-1449]"
  }, {
    "left" : "{}",
    "right" : "{}",
    "info" : "Block[1397-1875]:Block[1451-2215]"
  }, {
    "left" : "final MPD mpd = mApp.getMPD();",
    "right" : "final MPDStatus status = mApp.getMPD().getStatus();",
    "info" : "VariableDeclarationStatement[1515-1545]:VariableDeclarationStatement[1511-1562]"
  }, {
    "left" : "MPD",
    "right" : "MPDStatus",
    "info" : "SimpleType[1521-1524]:SimpleType[1517-1526]"
  }, {
    "left" : "mpd = mApp.getMPD()",
    "right" : "status = mApp.getMPD().getStatus()",
    "info" : "VariableDeclarationFragment[1525-1544]:VariableDeclarationFragment[1527-1561]"
  }, {
    "left" : "mApp.getMPD()",
    "right" : "mApp.getMPD()",
    "info" : "MethodInvocation[1531-1544]:MethodInvocation[1536-1549]"
  }, {
    "left" : "final String action = intent.getAction();",
    "right" : "final String action = intent.getAction();",
    "info" : "VariableDeclarationStatement[1554-1595]:VariableDeclarationStatement[1461-1502]"
  }, {
    "left" : "processIntent(action, mpd);",
    "right" : "MPDControl.run(action);",
    "info" : "ExpressionStatement[1754-1781]:ExpressionStatement[2078-2101]"
  }, {
    "left" : "action",
    "right" : "action",
    "info" : "SimpleName[1768-1774]:SimpleName[2093-2099]"
  }, {
    "left" : "mApp.removeConnectionLock(this);",
    "right" : "mApp.removeConnectionLock(token);",
    "info" : "ExpressionStatement[1837-1869]:ExpressionStatement[2126-2159]"
  }, {
    "left" : "case CMD_UPDATE_WIDGET:",
    "right" : "case CMD_UPDATE_WIDGET:",
    "info" : "SwitchCase[1976-1999]:SwitchCase[1602-1625]"
  }, {
    "left" : "SimpleWidgetProvider.getInstance().notifyChange(this);",
    "right" : "SimpleWidgetProvider.getInstance().notifyChange(this);",
    "info" : "ExpressionStatement[2096-2150]:ExpressionStatement[1713-1767]"
  } ]
}