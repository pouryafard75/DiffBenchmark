{
  "intraFileMappings" : {
    "matchedElements" : [
 {
      "left" : "PassiveState",
      "right" : "PassiveState",
      "info" : "TypeDeclaration[777-5461]:TypeDeclaration[824-14659]"
    }, {
      "left" : "public PassiveState(RaftStateContext context)",
      "right" : "public PassiveState(RaftStateContext context)",
      "info" : "MethodDeclaration[925-996]:MethodDeclaration[1004-1075]"
    }, {
      "left" : "public RaftState type()",
      "right" : "public RaftState type()",
      "info" : "MethodDeclaration[1000-1071]:MethodDeclaration[1079-1150]"
    }, {
      "left" : "protected CompletableFuture<PollResponse> poll(PollRequest request)",
      "right" : "protected CompletableFuture<PollResponse> poll(PollRequest request)",
      "info" : "MethodDeclaration[1423-1759]:MethodDeclaration[10621-10957]"
    }, {
      "left" : "protected CompletableFuture<VoteResponse> vote(VoteRequest request)",
      "right" : "protected CompletableFuture<VoteResponse> vote(VoteRequest request)",
      "info" : "MethodDeclaration[1763-2099]:MethodDeclaration[10961-11297]"
    }, {
      "left" : "protected CompletableFuture<CommandResponse> command(CommandRequest request)",
      "right" : "protected CompletableFuture<CommandResponse> command(CommandRequest request)",
      "info" : "MethodDeclaration[2103-2580]:MethodDeclaration[11301-11778]"
    }, {
      "left" : "protected CompletableFuture<QueryResponse> query(QueryRequest request)",
      "right" : "protected CompletableFuture<QueryResponse> query(QueryRequest request)",
      "info" : "MethodDeclaration[2584-3053]:MethodDeclaration[11782-12251]"
    }, {
      "left" : "protected CompletableFuture<RegisterResponse> register(RegisterRequest request)",
      "right" : "protected CompletableFuture<RegisterResponse> register(RegisterRequest request)",
      "info" : "MethodDeclaration[3057-3538]:MethodDeclaration[12255-12736]"
    }, {
      "left" : "protected CompletableFuture<KeepAliveResponse> keepAlive(KeepAliveRequest request)",
      "right" : "protected CompletableFuture<KeepAliveResponse> keepAlive(KeepAliveRequest request)",
      "info" : "MethodDeclaration[3542-4027]:MethodDeclaration[12740-13225]"
    }, {
      "left" : "protected CompletableFuture<JoinResponse> join(JoinRequest request)",
      "right" : "protected CompletableFuture<JoinResponse> join(JoinRequest request)",
      "info" : "MethodDeclaration[4031-4496]:MethodDeclaration[13229-13694]"
    }, {
      "left" : "protected CompletableFuture<LeaveResponse> leave(LeaveRequest request)",
      "right" : "protected CompletableFuture<LeaveResponse> leave(LeaveRequest request)",
      "info" : "MethodDeclaration[4500-4969]:MethodDeclaration[13698-14167]"
    }, {
      "left" : "protected CompletableFuture<HeartbeatResponse> heartbeat(HeartbeatRequest request)",
      "right" : "protected CompletableFuture<HeartbeatResponse> heartbeat(HeartbeatRequest request)",
      "info" : "MethodDeclaration[4973-5458]:MethodDeclaration[14171-14656]"
    } ],
    "mappings" : [
 {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[872-878]:Modifier[919-925]"
    }, {
      "left" : "class",
      "right" : "class",
      "info" : "TYPE_DECLARATION_KIND[879-884]:TYPE_DECLARATION_KIND[926-931]"
    }, {
      "left" : "PassiveState",
      "right" : "PassiveState",
      "info" : "SimpleName[885-897]:SimpleName[932-944]"
    }, {
      "left" : "AbstractState",
      "right" : "AbstractState",
      "info" : "SimpleType[906-919]:SimpleType[953-966]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[925-931]:Modifier[1004-1010]"
    }, {
      "left" : "PassiveState",
      "right" : "PassiveState",
      "info" : "SimpleName[932-944]:SimpleName[1011-1023]"
    }, {
      "left" : "RaftStateContext context",
      "right" : "RaftStateContext context",
      "info" : "SingleVariableDeclaration[945-969]:SingleVariableDeclaration[1024-1048]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[971-996]:Block[1050-1075]"
    }, {
      "left" : "super(context);",
      "right" : "super(context);",
      "info" : "SuperConstructorInvocation[977-992]:SuperConstructorInvocation[1056-1071]"
    }, {
      "left" : "@Override",
      "right" : "@Override",
      "info" : "MarkerAnnotation[1000-1009]:MarkerAnnotation[1079-1088]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[1012-1018]:Modifier[1091-1097]"
    }, {
      "left" : "RaftState",
      "right" : "RaftState",
      "info" : "SimpleType[1019-1028]:SimpleType[1098-1107]"
    }, {
      "left" : "type",
      "right" : "type",
      "info" : "SimpleName[1029-1033]:SimpleName[1108-1112]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[1036-1071]:Block[1115-1150]"
    }, {
      "left" : "return RaftState.PASSIVE;",
      "right" : "return RaftState.PASSIVE;",
      "info" : "ReturnStatement[1042-1067]:ReturnStatement[1121-1146]"
    }, {
      "left" : "protected",
      "right" : "protected",
      "info" : "Modifier[1087-1096]:Modifier[1316-1325]"
    }, {
      "left" : "CompletableFuture<AppendResponse>",
      "right" : "CompletableFuture<AppendResponse>",
      "info" : "ParameterizedType[1097-1130]:ParameterizedType[1326-1359]"
    }, {
      "left" : "append",
      "right" : "append",
      "info" : "SimpleName[1131-1137]:SimpleName[1360-1366]"
    }, {
      "left" : "AppendRequest request",
      "right" : "AppendRequest request",
      "info" : "SingleVariableDeclaration[1138-1159]:SingleVariableDeclaration[1910-1931]"
    }, {
      "left" : "context.checkThread();",
      "right" : "context.checkThread();",
      "info" : "ExpressionStatement[1167-1189]:ExpressionStatement[1402-1424]"
    }, {
      "left" : "logRequest(request)",
      "right" : "logRequest(request)",
      "info" : "MethodInvocation[1194-1213]:MethodInvocation[1531-1550]"
    }, {
      "left" : "return CompletableFuture.completedFuture(logResponse(AppendResponse.builder()\n      .withStatus(Response.Status.ERROR)\n      .withError(RaftError.Type.ILLEGAL_MEMBER_STATE_ERROR)\n      .build()));",
      "right" : "return AppendResponse.builder()\n      .withStatus(Response.Status.OK)\n      .withTerm(context.getTerm())\n      .withSucceeded(true)\n      .withLogIndex(context.getLog().lastIndex())\n      .build();",
      "info" : "ReturnStatement[1219-1415]:ReturnStatement[7555-7752]"
    }, {
      "left" : "CompletableFuture",
      "right" : "CompletableFuture",
      "info" : "METHOD_INVOCATION_RECEIVER[1226-1243]:METHOD_INVOCATION_RECEIVER[10389-10406]"
    }, {
      "left" : "completedFuture",
      "right" : "builder",
      "info" : "SimpleName[1244-1259]:SimpleName[2740-2747]"
    }, {
      "left" : "logResponse",
      "right" : "logTerm",
      "info" : "SimpleName[1260-1271]:SimpleName[2977-2984]"
    }, {
      "left" : "logResponse(AppendResponse.builder()\n      .withStatus(Response.Status.ERROR)\n      .withError(RaftError.Type.ILLEGAL_MEMBER_STATE_ERROR)\n      .build())",
      "right" : "AppendResponse.builder()\n      .withStatus(Response.Status.OK)\n      .withTerm(context.getTerm())\n      .withSucceeded(true)\n      .withLogIndex(context.getLog().lastIndex())",
      "info" : "MethodInvocation[1260-1413]:MethodInvocation[7562-7736]"
    }, {
      "left" : "AppendResponse.builder()\n      .withStatus(Response.Status.ERROR)\n      .withError(RaftError.Type.ILLEGAL_MEMBER_STATE_ERROR)\n      .build()",
      "right" : "AppendResponse.builder()\n      .withStatus(Response.Status.OK)\n      .withTerm(context.getTerm())\n      .withSucceeded(true)",
      "info" : "MethodInvocation[1272-1412]:MethodInvocation[7562-7686]"
    }, {
      "left" : "Response.Status.ERROR",
      "right" : "Response.Status.OK",
      "info" : "QualifiedName[1315-1336]:QualifiedName[7605-7623]"
    }, {
      "left" : "withError",
      "right" : "withTerm",
      "info" : "SimpleName[1345-1354]:SimpleName[7632-7640]"
    }, {
      "left" : "build",
      "right" : "withSucceeded",
      "info" : "SimpleName[1405-1410]:SimpleName[7667-7680]"
    }, {
      "left" : "@Override",
      "right" : "@Override",
      "info" : "MarkerAnnotation[1423-1432]:MarkerAnnotation[10621-10630]"
    }, {
      "left" : "protected",
      "right" : "protected",
      "info" : "Modifier[1435-1444]:Modifier[10633-10642]"
    }, {
      "left" : "CompletableFuture<PollResponse>",
      "right" : "CompletableFuture<PollResponse>",
      "info" : "ParameterizedType[1445-1476]:ParameterizedType[10643-10674]"
    }, {
      "left" : "poll",
      "right" : "poll",
      "info" : "SimpleName[1477-1481]:SimpleName[10675-10679]"
    }, {
      "left" : "PollRequest request",
      "right" : "PollRequest request",
      "info" : "SingleVariableDeclaration[1482-1501]:SingleVariableDeclaration[10680-10699]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[1503-1759]:Block[10701-10957]"
    }, {
      "left" : "context.checkThread();",
      "right" : "context.checkThread();",
      "info" : "ExpressionStatement[1509-1531]:ExpressionStatement[10707-10729]"
    }, {
      "left" : "logRequest(request);",
      "right" : "logRequest(request);",
      "info" : "ExpressionStatement[1536-1556]:ExpressionStatement[10734-10754]"
    }, {
      "left" : "return CompletableFuture.completedFuture(logResponse(PollResponse.builder()\n      .withStatus(Response.Status.ERROR)\n      .withError(RaftError.Type.ILLEGAL_MEMBER_STATE_ERROR)\n      .build()));",
      "right" : "return CompletableFuture.completedFuture(logResponse(PollResponse.builder()\n      .withStatus(Response.Status.ERROR)\n      .withError(RaftError.Type.ILLEGAL_MEMBER_STATE_ERROR)\n      .build()));",
      "info" : "ReturnStatement[1561-1755]:ReturnStatement[10759-10953]"
    }, {
      "left" : "@Override",
      "right" : "@Override",
      "info" : "MarkerAnnotation[1763-1772]:MarkerAnnotation[10961-10970]"
    }, {
      "left" : "protected",
      "right" : "protected",
      "info" : "Modifier[1775-1784]:Modifier[10973-10982]"
    }, {
      "left" : "CompletableFuture<VoteResponse>",
      "right" : "CompletableFuture<VoteResponse>",
      "info" : "ParameterizedType[1785-1816]:ParameterizedType[10983-11014]"
    }, {
      "left" : "vote",
      "right" : "vote",
      "info" : "SimpleName[1817-1821]:SimpleName[11015-11019]"
    }, {
      "left" : "VoteRequest request",
      "right" : "VoteRequest request",
      "info" : "SingleVariableDeclaration[1822-1841]:SingleVariableDeclaration[11020-11039]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[1843-2099]:Block[11041-11297]"
    }, {
      "left" : "context.checkThread();",
      "right" : "context.checkThread();",
      "info" : "ExpressionStatement[1849-1871]:ExpressionStatement[11047-11069]"
    }, {
      "left" : "logRequest(request);",
      "right" : "logRequest(request);",
      "info" : "ExpressionStatement[1876-1896]:ExpressionStatement[11074-11094]"
    }, {
      "left" : "return CompletableFuture.completedFuture(logResponse(VoteResponse.builder()\n      .withStatus(Response.Status.ERROR)\n      .withError(RaftError.Type.ILLEGAL_MEMBER_STATE_ERROR)\n      .build()));",
      "right" : "return CompletableFuture.completedFuture(logResponse(VoteResponse.builder()\n      .withStatus(Response.Status.ERROR)\n      .withError(RaftError.Type.ILLEGAL_MEMBER_STATE_ERROR)\n      .build()));",
      "info" : "ReturnStatement[1901-2095]:ReturnStatement[11099-11293]"
    }, {
      "left" : "@Override",
      "right" : "@Override",
      "info" : "MarkerAnnotation[2103-2112]:MarkerAnnotation[11301-11310]"
    }, {
      "left" : "protected",
      "right" : "protected",
      "info" : "Modifier[2115-2124]:Modifier[11313-11322]"
    }, {
      "left" : "CompletableFuture<CommandResponse>",
      "right" : "CompletableFuture<CommandResponse>",
      "info" : "ParameterizedType[2125-2159]:ParameterizedType[11323-11357]"
    }, {
      "left" : "command",
      "right" : "command",
      "info" : "SimpleName[2160-2167]:SimpleName[11358-11365]"
    }, {
      "left" : "CommandRequest request",
      "right" : "CommandRequest request",
      "info" : "SingleVariableDeclaration[2168-2190]:SingleVariableDeclaration[11366-11388]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[2192-2580]:Block[11390-11778]"
    }, {
      "left" : "context.checkThread();",
      "right" : "context.checkThread();",
      "info" : "ExpressionStatement[2198-2220]:ExpressionStatement[11396-11418]"
    }, {
      "left" : "logRequest(request);",
      "right" : "logRequest(request);",
      "info" : "ExpressionStatement[2225-2245]:ExpressionStatement[11423-11443]"
    }, {
      "left" : "if (context.getLeader() == 0)",
      "right" : "if (context.getLeader() == 0)",
      "info" : "IfStatement[2250-2576]:IfStatement[11448-11774]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[2280-2486]:Block[11478-11684]"
    }, {
      "left" : "return CompletableFuture.completedFuture(logResponse(CommandResponse.builder()\n        .withStatus(Response.Status.ERROR)\n        .withError(RaftError.Type.NO_LEADER_ERROR)\n        .build()));",
      "right" : "return CompletableFuture.completedFuture(logResponse(CommandResponse.builder()\n        .withStatus(Response.Status.ERROR)\n        .withError(RaftError.Type.NO_LEADER_ERROR)\n        .build()));",
      "info" : "ReturnStatement[2288-2480]:ReturnStatement[11486-11678]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[2492-2576]:Block[11690-11774]"
    }, {
      "left" : "return context.getCluster().member(context.getLeader()).send(request);",
      "right" : "return context.getCluster().member(context.getLeader()).send(request);",
      "info" : "ReturnStatement[2500-2570]:ReturnStatement[11698-11768]"
    }, {
      "left" : "@Override",
      "right" : "@Override",
      "info" : "MarkerAnnotation[2584-2593]:MarkerAnnotation[11782-11791]"
    }, {
      "left" : "protected",
      "right" : "protected",
      "info" : "Modifier[2596-2605]:Modifier[11794-11803]"
    }, {
      "left" : "CompletableFuture<QueryResponse>",
      "right" : "CompletableFuture<QueryResponse>",
      "info" : "ParameterizedType[2606-2638]:ParameterizedType[11804-11836]"
    }, {
      "left" : "query",
      "right" : "query",
      "info" : "SimpleName[2639-2644]:SimpleName[11837-11842]"
    }, {
      "left" : "QueryRequest request",
      "right" : "QueryRequest request",
      "info" : "SingleVariableDeclaration[2645-2665]:SingleVariableDeclaration[11843-11863]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[2667-3053]:Block[11865-12251]"
    }, {
      "left" : "context.checkThread();",
      "right" : "context.checkThread();",
      "info" : "ExpressionStatement[2673-2695]:ExpressionStatement[11871-11893]"
    }, {
      "left" : "logRequest(request);",
      "right" : "logRequest(request);",
      "info" : "ExpressionStatement[2700-2720]:ExpressionStatement[11898-11918]"
    }, {
      "left" : "if (context.getLeader() == 0)",
      "right" : "if (context.getLeader() == 0)",
      "info" : "IfStatement[2725-3049]:IfStatement[11923-12247]"
    }, {
      "left" : "context.getLeader()",
      "right" : "context.getLeader()",
      "info" : "MethodInvocation[2729-2748]:MethodInvocation[2186-2205]"
    }, {
      "left" : "==",
      "right" : "==",
      "info" : "INFIX_EXPRESSION_OPERATOR[2749-2751]:INFIX_EXPRESSION_OPERATOR[2206-2208]"
    }, {
      "left" : "0",
      "right" : "0",
      "info" : "NumberLiteral[2752-2753]:NumberLiteral[2209-2210]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[2755-2959]:Block[11953-12157]"
    }, {
      "left" : "return CompletableFuture.completedFuture(logResponse(QueryResponse.builder()\n        .withStatus(Response.Status.ERROR)\n        .withError(RaftError.Type.NO_LEADER_ERROR)\n        .build()));",
      "right" : "return CompletableFuture.completedFuture(logResponse(QueryResponse.builder()\n        .withStatus(Response.Status.ERROR)\n        .withError(RaftError.Type.NO_LEADER_ERROR)\n        .build()));",
      "info" : "ReturnStatement[2763-2953]:ReturnStatement[11961-12151]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[2965-3049]:Block[12163-12247]"
    }, {
      "left" : "return context.getCluster().member(context.getLeader()).send(request);",
      "right" : "return context.getCluster().member(context.getLeader()).send(request);",
      "info" : "ReturnStatement[2973-3043]:ReturnStatement[12171-12241]"
    }, {
      "left" : "@Override",
      "right" : "@Override",
      "info" : "MarkerAnnotation[3057-3066]:MarkerAnnotation[12255-12264]"
    }, {
      "left" : "protected",
      "right" : "protected",
      "info" : "Modifier[3069-3078]:Modifier[12267-12276]"
    }, {
      "left" : "CompletableFuture<RegisterResponse>",
      "right" : "CompletableFuture<RegisterResponse>",
      "info" : "ParameterizedType[3079-3114]:ParameterizedType[12277-12312]"
    }, {
      "left" : "register",
      "right" : "register",
      "info" : "SimpleName[3115-3123]:SimpleName[12313-12321]"
    }, {
      "left" : "RegisterRequest request",
      "right" : "RegisterRequest request",
      "info" : "SingleVariableDeclaration[3124-3147]:SingleVariableDeclaration[12322-12345]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[3149-3538]:Block[12347-12736]"
    }, {
      "left" : "context.checkThread();",
      "right" : "context.checkThread();",
      "info" : "ExpressionStatement[3155-3177]:ExpressionStatement[12353-12375]"
    }, {
      "left" : "logRequest(request);",
      "right" : "logRequest(request);",
      "info" : "ExpressionStatement[3182-3202]:ExpressionStatement[12380-12400]"
    }, {
      "left" : "if (context.getLeader() == 0)",
      "right" : "if (context.getLeader() == 0)",
      "info" : "IfStatement[3207-3534]:IfStatement[12405-12732]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[3237-3444]:Block[12435-12642]"
    }, {
      "left" : "return CompletableFuture.completedFuture(logResponse(RegisterResponse.builder()\n        .withStatus(Response.Status.ERROR)\n        .withError(RaftError.Type.NO_LEADER_ERROR)\n        .build()));",
      "right" : "return CompletableFuture.completedFuture(logResponse(RegisterResponse.builder()\n        .withStatus(Response.Status.ERROR)\n        .withError(RaftError.Type.NO_LEADER_ERROR)\n        .build()));",
      "info" : "ReturnStatement[3245-3438]:ReturnStatement[12443-12636]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[3450-3534]:Block[12648-12732]"
    }, {
      "left" : "return context.getCluster().member(context.getLeader()).send(request);",
      "right" : "return context.getCluster().member(context.getLeader()).send(request);",
      "info" : "ReturnStatement[3458-3528]:ReturnStatement[12656-12726]"
    }, {
      "left" : "@Override",
      "right" : "@Override",
      "info" : "MarkerAnnotation[3542-3551]:MarkerAnnotation[12740-12749]"
    }, {
      "left" : "protected",
      "right" : "protected",
      "info" : "Modifier[3554-3563]:Modifier[12752-12761]"
    }, {
      "left" : "CompletableFuture<KeepAliveResponse>",
      "right" : "CompletableFuture<KeepAliveResponse>",
      "info" : "ParameterizedType[3564-3600]:ParameterizedType[12762-12798]"
    }, {
      "left" : "keepAlive",
      "right" : "keepAlive",
      "info" : "SimpleName[3601-3610]:SimpleName[12799-12808]"
    }, {
      "left" : "KeepAliveRequest request",
      "right" : "KeepAliveRequest request",
      "info" : "SingleVariableDeclaration[3611-3635]:SingleVariableDeclaration[12809-12833]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[3637-4027]:Block[12835-13225]"
    }, {
      "left" : "context.checkThread();",
      "right" : "context.checkThread();",
      "info" : "ExpressionStatement[3643-3665]:ExpressionStatement[12841-12863]"
    }, {
      "left" : "logRequest(request);",
      "right" : "logRequest(request);",
      "info" : "ExpressionStatement[3670-3690]:ExpressionStatement[12868-12888]"
    }, {
      "left" : "if (context.getLeader() == 0)",
      "right" : "if (context.getLeader() == 0)",
      "info" : "IfStatement[3695-4023]:IfStatement[12893-13221]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[3725-3933]:Block[12923-13131]"
    }, {
      "left" : "return CompletableFuture.completedFuture(logResponse(KeepAliveResponse.builder()\n        .withStatus(Response.Status.ERROR)\n        .withError(RaftError.Type.NO_LEADER_ERROR)\n        .build()));",
      "right" : "return CompletableFuture.completedFuture(logResponse(KeepAliveResponse.builder()\n        .withStatus(Response.Status.ERROR)\n        .withError(RaftError.Type.NO_LEADER_ERROR)\n        .build()));",
      "info" : "ReturnStatement[3733-3927]:ReturnStatement[12931-13125]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[3939-4023]:Block[13137-13221]"
    }, {
      "left" : "return context.getCluster().member(context.getLeader()).send(request);",
      "right" : "return context.getCluster().member(context.getLeader()).send(request);",
      "info" : "ReturnStatement[3947-4017]:ReturnStatement[13145-13215]"
    }, {
      "left" : "@Override",
      "right" : "@Override",
      "info" : "MarkerAnnotation[4031-4040]:MarkerAnnotation[13229-13238]"
    }, {
      "left" : "protected",
      "right" : "protected",
      "info" : "Modifier[4043-4052]:Modifier[13241-13250]"
    }, {
      "left" : "CompletableFuture<JoinResponse>",
      "right" : "CompletableFuture<JoinResponse>",
      "info" : "ParameterizedType[4053-4084]:ParameterizedType[13251-13282]"
    }, {
      "left" : "join",
      "right" : "join",
      "info" : "SimpleName[4085-4089]:SimpleName[13283-13287]"
    }, {
      "left" : "JoinRequest request",
      "right" : "JoinRequest request",
      "info" : "SingleVariableDeclaration[4090-4109]:SingleVariableDeclaration[13288-13307]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[4111-4496]:Block[13309-13694]"
    }, {
      "left" : "context.checkThread();",
      "right" : "context.checkThread();",
      "info" : "ExpressionStatement[4117-4139]:ExpressionStatement[13315-13337]"
    }, {
      "left" : "logRequest(request);",
      "right" : "logRequest(request);",
      "info" : "ExpressionStatement[4144-4164]:ExpressionStatement[13342-13362]"
    }, {
      "left" : "if (context.getLeader() == 0)",
      "right" : "if (context.getLeader() == 0)",
      "info" : "IfStatement[4169-4492]:IfStatement[13367-13690]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[4199-4402]:Block[13397-13600]"
    }, {
      "left" : "return CompletableFuture.completedFuture(logResponse(JoinResponse.builder()\n        .withStatus(Response.Status.ERROR)\n        .withError(RaftError.Type.NO_LEADER_ERROR)\n        .build()));",
      "right" : "return CompletableFuture.completedFuture(logResponse(JoinResponse.builder()\n        .withStatus(Response.Status.ERROR)\n        .withError(RaftError.Type.NO_LEADER_ERROR)\n        .build()));",
      "info" : "ReturnStatement[4207-4396]:ReturnStatement[13405-13594]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[4408-4492]:Block[13606-13690]"
    }, {
      "left" : "return context.getCluster().member(context.getLeader()).send(request);",
      "right" : "return context.getCluster().member(context.getLeader()).send(request);",
      "info" : "ReturnStatement[4416-4486]:ReturnStatement[13614-13684]"
    }, {
      "left" : "@Override",
      "right" : "@Override",
      "info" : "MarkerAnnotation[4500-4509]:MarkerAnnotation[13698-13707]"
    }, {
      "left" : "protected",
      "right" : "protected",
      "info" : "Modifier[4512-4521]:Modifier[13710-13719]"
    }, {
      "left" : "CompletableFuture<LeaveResponse>",
      "right" : "CompletableFuture<LeaveResponse>",
      "info" : "ParameterizedType[4522-4554]:ParameterizedType[13720-13752]"
    }, {
      "left" : "leave",
      "right" : "leave",
      "info" : "SimpleName[4555-4560]:SimpleName[13753-13758]"
    }, {
      "left" : "LeaveRequest request",
      "right" : "LeaveRequest request",
      "info" : "SingleVariableDeclaration[4561-4581]:SingleVariableDeclaration[13759-13779]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[4583-4969]:Block[13781-14167]"
    }, {
      "left" : "context.checkThread();",
      "right" : "context.checkThread();",
      "info" : "ExpressionStatement[4589-4611]:ExpressionStatement[13787-13809]"
    }, {
      "left" : "logRequest(request);",
      "right" : "logRequest(request);",
      "info" : "ExpressionStatement[4616-4636]:ExpressionStatement[13814-13834]"
    }, {
      "left" : "if (context.getLeader() == 0)",
      "right" : "if (context.getLeader() == 0)",
      "info" : "IfStatement[4641-4965]:IfStatement[13839-14163]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[4671-4875]:Block[13869-14073]"
    }, {
      "left" : "return CompletableFuture.completedFuture(logResponse(LeaveResponse.builder()\n        .withStatus(Response.Status.ERROR)\n        .withError(RaftError.Type.NO_LEADER_ERROR)\n        .build()));",
      "right" : "return CompletableFuture.completedFuture(logResponse(LeaveResponse.builder()\n        .withStatus(Response.Status.ERROR)\n        .withError(RaftError.Type.NO_LEADER_ERROR)\n        .build()));",
      "info" : "ReturnStatement[4679-4869]:ReturnStatement[13877-14067]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[4881-4965]:Block[14079-14163]"
    }, {
      "left" : "return context.getCluster().member(context.getLeader()).send(request);",
      "right" : "return context.getCluster().member(context.getLeader()).send(request);",
      "info" : "ReturnStatement[4889-4959]:ReturnStatement[14087-14157]"
    }, {
      "left" : "@Override",
      "right" : "@Override",
      "info" : "MarkerAnnotation[4973-4982]:MarkerAnnotation[14171-14180]"
    }, {
      "left" : "protected",
      "right" : "protected",
      "info" : "Modifier[4985-4994]:Modifier[14183-14192]"
    }, {
      "left" : "CompletableFuture<HeartbeatResponse>",
      "right" : "CompletableFuture<HeartbeatResponse>",
      "info" : "ParameterizedType[4995-5031]:ParameterizedType[14193-14229]"
    }, {
      "left" : "heartbeat",
      "right" : "heartbeat",
      "info" : "SimpleName[5032-5041]:SimpleName[14230-14239]"
    }, {
      "left" : "HeartbeatRequest request",
      "right" : "HeartbeatRequest request",
      "info" : "SingleVariableDeclaration[5042-5066]:SingleVariableDeclaration[14240-14264]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[5068-5458]:Block[14266-14656]"
    }, {
      "left" : "context.checkThread();",
      "right" : "context.checkThread();",
      "info" : "ExpressionStatement[5074-5096]:ExpressionStatement[14272-14294]"
    }, {
      "left" : "logRequest(request);",
      "right" : "logRequest(request);",
      "info" : "ExpressionStatement[5101-5121]:ExpressionStatement[14299-14319]"
    }, {
      "left" : "if (context.getLeader() == 0)",
      "right" : "if (context.getLeader() == 0)",
      "info" : "IfStatement[5126-5454]:IfStatement[14324-14652]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[5156-5364]:Block[14354-14562]"
    }, {
      "left" : "return CompletableFuture.completedFuture(logResponse(HeartbeatResponse.builder()\n        .withStatus(Response.Status.ERROR)\n        .withError(RaftError.Type.NO_LEADER_ERROR)\n        .build()));",
      "right" : "return CompletableFuture.completedFuture(logResponse(HeartbeatResponse.builder()\n        .withStatus(Response.Status.ERROR)\n        .withError(RaftError.Type.NO_LEADER_ERROR)\n        .build()));",
      "info" : "ReturnStatement[5164-5358]:ReturnStatement[14362-14556]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[5370-5454]:Block[14568-14652]"
    }, {
      "left" : "return context.getCluster().member(context.getLeader()).send(request);",
      "right" : "return context.getCluster().member(context.getLeader()).send(request);",
      "info" : "ReturnStatement[5378-5448]:ReturnStatement[14576-14646]"
    }, {
      "left" : "context",
      "right" : "request",
      "info" : "METHOD_INVOCATION_RECEIVER[5385-5392]:METHOD_INVOCATION_RECEIVER[4842-4849]"
    } ]
  },
  "interFileMappings" : {
    "Moved from File: raft/src/main/java/net/kuujo/copycat/raft/state/ActiveState.java" : {
      "matchedElements" : [
 {
        "left" : "protected boolean transition;",
        "right" : "protected boolean transition;",
        "info" : "FieldDeclaration[1156-1185]:FieldDeclaration[971-1000]"
      }, {
        "left" : "protected CompletableFuture<AppendResponse> append(final AppendRequest request)",
        "right" : "protected CompletableFuture<AppendResponse> append(final AppendRequest request)",
        "info" : "MethodDeclaration[1847-2369]:MethodDeclaration[1304-1826]"
      }, {
        "left" : "private AppendResponse handleAppend(AppendRequest request)",
        "right" : "private AppendResponse handleAppend(AppendRequest request)",
        "info" : "MethodDeclaration[2373-3643]:MethodDeclaration[1830-3100]"
      }, {
        "left" : "private AppendResponse doCheckPreviousEntry(AppendRequest request)",
        "right" : "private AppendResponse doCheckPreviousEntry(AppendRequest request)",
        "info" : "MethodDeclaration[3647-5572]:MethodDeclaration[3104-5029]"
      }, {
        "left" : "private AppendResponse doAppendEntries(AppendRequest request)",
        "right" : "private AppendResponse doAppendEntries(AppendRequest request)",
        "info" : "MethodDeclaration[5576-8299]:MethodDeclaration[5033-7756]"
      }, {
        "left" : "private CompletableFuture<Void> applyCommits(long commitIndex)",
        "right" : "private CompletableFuture<Void> applyCommits(long commitIndex)",
        "info" : "MethodDeclaration[8303-10976]:MethodDeclaration[7760-10433]"
      }, {
        "left" : "private void applyIndex(long globalIndex)",
        "right" : "private void applyIndex(long globalIndex)",
        "info" : "MethodDeclaration[10980-11160]:MethodDeclaration[10437-10617]"
      } ],
      "mappings" : [
 {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[1939-2369]:Block[1396-1826]"
      }, {
        "left" : "CompletableFuture<AppendResponse> future = CompletableFuture.completedFuture(logResponse(handleAppend(logRequest(request))));",
        "right" : "CompletableFuture<AppendResponse> future = CompletableFuture.completedFuture(logResponse(handleAppend(logRequest(request))));",
        "info" : "VariableDeclarationStatement[1972-2097]:VariableDeclarationStatement[1429-1554]"
      }, {
        "left" : "if (transition)",
        "right" : "if (transition)",
        "info" : "IfStatement[2259-2346]:IfStatement[1716-1803]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[2275-2346]:Block[1732-1803]"
      }, {
        "left" : "transition(RaftState.FOLLOWER);",
        "right" : "transition(RaftState.FOLLOWER);",
        "info" : "ExpressionStatement[2283-2314]:ExpressionStatement[1740-1771]"
      }, {
        "left" : "transition = false;",
        "right" : "transition = false;",
        "info" : "ExpressionStatement[2321-2340]:ExpressionStatement[1778-1797]"
      }, {
        "left" : "return future;",
        "right" : "return future;",
        "info" : "ReturnStatement[2351-2365]:ReturnStatement[1808-1822]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[2476-3643]:Block[1933-3100]"
      }, {
        "left" : "if (request.term() > context.getTerm() || (request.term() == context.getTerm() && context.getLeader() == 0))",
        "right" : "if (request.term() > context.getTerm() || (request.term() == context.getTerm() && context.getLeader() == 0))",
        "info" : "IfStatement[2647-2870]:IfStatement[2104-2327]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[2756-2870]:Block[2213-2327]"
      }, {
        "left" : "context.setTerm(request.term());",
        "right" : "context.setTerm(request.term());",
        "info" : "ExpressionStatement[2764-2796]:ExpressionStatement[2221-2253]"
      }, {
        "left" : "context.setLeader(request.leader());",
        "right" : "context.setLeader(request.leader());",
        "info" : "ExpressionStatement[2803-2839]:ExpressionStatement[2260-2296]"
      }, {
        "left" : "transition = true;",
        "right" : "transition = true;",
        "info" : "ExpressionStatement[2846-2864]:ExpressionStatement[2303-2321]"
      }, {
        "left" : "if (request.term() < context.getTerm())",
        "right" : "if (request.term() < context.getTerm())",
        "info" : "IfStatement[3061-3639]:IfStatement[2518-3096]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[3101-3475]:Block[2558-2932]"
      }, {
        "left" : "LOGGER.warn(\"{} - Rejected {}: request term is less than the current term ({})\", context.getCluster().member().id(), request, context.getTerm());",
        "right" : "LOGGER.warn(\"{} - Rejected {}: request term is less than the current term ({})\", context.getCluster().member().id(), request, context.getTerm());",
        "info" : "ExpressionStatement[3109-3254]:ExpressionStatement[2566-2711]"
      }, {
        "left" : "return AppendResponse.builder()\n        .withStatus(Response.Status.OK)\n        .withTerm(context.getTerm())\n        .withSucceeded(false)\n        .withLogIndex(context.getLog().lastIndex())\n        .build();",
        "right" : "return AppendResponse.builder()\n        .withStatus(Response.Status.OK)\n        .withTerm(context.getTerm())\n        .withSucceeded(false)\n        .withLogIndex(context.getLog().lastIndex())\n        .build();",
        "info" : "ReturnStatement[3261-3469]:ReturnStatement[2718-2926]"
      }, {
        "left" : "if (request.logIndex() != 0 && request.logTerm() != 0)",
        "right" : "if (request.logIndex() != 0 && request.logTerm() != 0)",
        "info" : "IfStatement[3481-3639]:IfStatement[2938-3096]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[3536-3587]:Block[2993-3044]"
      }, {
        "left" : "return doCheckPreviousEntry(request);",
        "right" : "return doCheckPreviousEntry(request);",
        "info" : "ReturnStatement[3544-3581]:ReturnStatement[3001-3038]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[3593-3639]:Block[3050-3096]"
      }, {
        "left" : "return doAppendEntries(request);",
        "right" : "return doAppendEntries(request);",
        "info" : "ReturnStatement[3601-3633]:ReturnStatement[3058-3090]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[3778-5572]:Block[3235-5029]"
      }, {
        "left" : "if (request.logIndex() != 0 && context.getLog().isEmpty())",
        "right" : "if (request.logIndex() != 0 && context.getLog().isEmpty())",
        "info" : "IfStatement[3784-4818]:IfStatement[3241-4275]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[3843-4268]:Block[3300-3725]"
      }, {
        "left" : "LOGGER.warn(\"{} - Rejected {}: Previous index ({}) is greater than the local log's last index ({})\", context.getCluster().member().id(), request, request.logIndex(), context.getLog().lastIndex());",
        "right" : "LOGGER.warn(\"{} - Rejected {}: Previous index ({}) is greater than the local log's last index ({})\", context.getCluster().member().id(), request, request.logIndex(), context.getLog().lastIndex());",
        "info" : "ExpressionStatement[3851-4047]:ExpressionStatement[3308-3504]"
      }, {
        "left" : "return AppendResponse.builder()\n        .withStatus(Response.Status.OK)\n        .withTerm(context.getTerm())\n        .withSucceeded(false)\n        .withLogIndex(context.getLog().lastIndex())\n        .build();",
        "right" : "return AppendResponse.builder()\n        .withStatus(Response.Status.OK)\n        .withTerm(context.getTerm())\n        .withSucceeded(false)\n        .withLogIndex(context.getLog().lastIndex())\n        .build();",
        "info" : "ReturnStatement[4054-4262]:ReturnStatement[3511-3719]"
      }, {
        "left" : "if (request.logIndex() != 0 && context.getLog().lastIndex() != 0 && request.logIndex() > context.getLog().lastIndex())",
        "right" : "if (request.logIndex() != 0 && context.getLog().lastIndex() != 0 && request.logIndex() > context.getLog().lastIndex())",
        "info" : "IfStatement[4274-4818]:IfStatement[3731-4275]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[4393-4818]:Block[3850-4275]"
      }, {
        "left" : "LOGGER.warn(\"{} - Rejected {}: Previous index ({}) is greater than the local log's last index ({})\", context.getCluster().member().id(), request, request.logIndex(), context.getLog().lastIndex());",
        "right" : "LOGGER.warn(\"{} - Rejected {}: Previous index ({}) is greater than the local log's last index ({})\", context.getCluster().member().id(), request, request.logIndex(), context.getLog().lastIndex());",
        "info" : "ExpressionStatement[4401-4597]:ExpressionStatement[3858-4054]"
      }, {
        "left" : "return AppendResponse.builder()\n        .withStatus(Response.Status.OK)\n        .withTerm(context.getTerm())\n        .withSucceeded(false)\n        .withLogIndex(context.getLog().lastIndex())\n        .build();",
        "right" : "return AppendResponse.builder()\n        .withStatus(Response.Status.OK)\n        .withTerm(context.getTerm())\n        .withSucceeded(false)\n        .withLogIndex(context.getLog().lastIndex())\n        .build();",
        "info" : "ReturnStatement[4604-4812]:ReturnStatement[4061-4269]"
      }, {
        "left" : "Entry entry = context.getLog().getEntry(request.logIndex());",
        "right" : "Entry entry = context.getLog().getEntry(request.logIndex());",
        "info" : "VariableDeclarationStatement[4921-4981]:VariableDeclarationStatement[4378-4438]"
      }, {
        "left" : "if (entry == null || entry.getTerm() != request.logTerm())",
        "right" : "if (entry == null || entry.getTerm() != request.logTerm())",
        "info" : "IfStatement[4986-5568]:IfStatement[4443-5025]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[5045-5516]:Block[4502-4973]"
      }, {
        "left" : "LOGGER.warn(\"{} - Rejected {}: Request log term does not match local log term {} for the same entry\", context.getCluster().member().id(), request, entry.getTerm());",
        "right" : "LOGGER.warn(\"{} - Rejected {}: Request log term does not match local log term {} for the same entry\", context.getCluster().member().id(), request, entry.getTerm());",
        "info" : "ExpressionStatement[5053-5217]:ExpressionStatement[4510-4674]"
      }, {
        "left" : "return AppendResponse.builder()\n        .withStatus(Response.Status.OK)\n        .withTerm(context.getTerm())\n        .withSucceeded(false)\n        .withLogIndex(request.logIndex() <= context.getLog().lastIndex() ? request.logIndex() - 1 : context.getLog().lastIndex())\n        .build();",
        "right" : "return AppendResponse.builder()\n        .withStatus(Response.Status.OK)\n        .withTerm(context.getTerm())\n        .withSucceeded(false)\n        .withLogIndex(request.logIndex() <= context.getLog().lastIndex() ? request.logIndex() - 1 : context.getLog().lastIndex())\n        .build();",
        "info" : "ReturnStatement[5224-5510]:ReturnStatement[4681-4967]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[5522-5568]:Block[4979-5025]"
      }, {
        "left" : "return doAppendEntries(request);",
        "right" : "return doAppendEntries(request);",
        "info" : "ReturnStatement[5530-5562]:ReturnStatement[4987-5019]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[5722-8299]:Block[5179-7756]"
      }, {
        "left" : "if (!request.entries().isEmpty())",
        "right" : "if (!request.entries().isEmpty())",
        "info" : "IfStatement[5874-7828]:IfStatement[5331-7285]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[5908-7828]:Block[5365-7285]"
      }, {
        "left" : "for (Entry entry : request.entries())",
        "right" : "for (Entry entry : request.entries())",
        "info" : "EnhancedForStatement[5986-7822]:EnhancedForStatement[5443-7279]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[6024-7822]:Block[5481-7279]"
      }, {
        "left" : "if (context.getLog().containsIndex(entry.getIndex()))",
        "right" : "if (context.getLog().containsIndex(entry.getIndex()))",
        "info" : "IfStatement[6290-7814]:IfStatement[5747-7271]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[6344-7471]:Block[5801-6928]"
      }, {
        "left" : "Entry match = context.getLog().getEntry(entry.getIndex());",
        "right" : "Entry match = context.getLog().getEntry(entry.getIndex());",
        "info" : "VariableDeclarationStatement[6444-6502]:VariableDeclarationStatement[5901-5959]"
      }, {
        "left" : "if (match != null)",
        "right" : "if (match != null)",
        "info" : "IfStatement[6513-7461]:IfStatement[5970-6918]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[6532-7206]:Block[5989-6663]"
      }, {
        "left" : "if (entry.getTerm() != match.getTerm())",
        "right" : "if (entry.getTerm() != match.getTerm())",
        "info" : "IfStatement[6546-7194]:IfStatement[6003-6651]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[6586-7194]:Block[6043-6651]"
      }, {
        "left" : "LOGGER.warn(\"{} - Appended entry term does not match local log, removing incorrect entries\", context.getCluster().member().id());",
        "right" : "LOGGER.warn(\"{} - Appended entry term does not match local log, removing incorrect entries\", context.getCluster().member().id());",
        "info" : "ExpressionStatement[6809-6938]:ExpressionStatement[6266-6395]"
      }, {
        "left" : "context.getLog().truncate(entry.getIndex() - 1);",
        "right" : "context.getLog().truncate(entry.getIndex() - 1);",
        "info" : "ExpressionStatement[6953-7001]:ExpressionStatement[6410-6458]"
      }, {
        "left" : "context.getLog().appendEntry(entry);",
        "right" : "context.getLog().appendEntry(entry);",
        "info" : "ExpressionStatement[7016-7052]:ExpressionStatement[6473-6509]"
      }, {
        "left" : "LOGGER.debug(\"{} - Appended {} to log at index {}\", context.getCluster().member().id(), entry, entry.getIndex());",
        "right" : "LOGGER.debug(\"{} - Appended {} to log at index {}\", context.getCluster().member().id(), entry, entry.getIndex());",
        "info" : "ExpressionStatement[7067-7180]:ExpressionStatement[6524-6637]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[7212-7461]:Block[6669-6918]"
      }, {
        "left" : "context.getLog().truncate(entry.getIndex() - 1);",
        "right" : "context.getLog().truncate(entry.getIndex() - 1);",
        "info" : "ExpressionStatement[7226-7274]:ExpressionStatement[6683-6731]"
      }, {
        "left" : "context.getLog().appendEntry(entry);",
        "right" : "context.getLog().appendEntry(entry);",
        "info" : "ExpressionStatement[7287-7323]:ExpressionStatement[6744-6780]"
      }, {
        "left" : "LOGGER.debug(\"{} - Appended {} to log at index {}\", context.getCluster().member().id(), entry, entry.getIndex());",
        "right" : "LOGGER.debug(\"{} - Appended {} to log at index {}\", context.getCluster().member().id(), entry, entry.getIndex());",
        "info" : "ExpressionStatement[7336-7449]:ExpressionStatement[6793-6906]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[7477-7814]:Block[6934-7271]"
      }, {
        "left" : "context.getLog().skip(entry.getIndex() - context.getLog().lastIndex() - 1).appendEntry(entry);",
        "right" : "context.getLog().skip(entry.getIndex() - context.getLog().lastIndex() - 1).appendEntry(entry);",
        "info" : "ExpressionStatement[7586-7680]:ExpressionStatement[7043-7137]"
      }, {
        "left" : "LOGGER.debug(\"{} - Appended {} to log at index {}\", context.getCluster().member().id(), entry, entry.getIndex());",
        "right" : "LOGGER.debug(\"{} - Appended {} to log at index {}\", context.getCluster().member().id(), entry, entry.getIndex());",
        "info" : "ExpressionStatement[7691-7804]:ExpressionStatement[7148-7261]"
      }, {
        "left" : "context.getContext().execute(() -> {\n      applyCommits(request.commitIndex())\n        .thenRun(() -> applyIndex(request.globalIndex()))\n        .thenRun(request::close);\n    });",
        "right" : "context.getContext().execute(() -> {\n      applyCommits(request.commitIndex())\n        .thenRun(() -> applyIndex(request.globalIndex()))\n        .thenRun(request::close);\n    });",
        "info" : "ExpressionStatement[7914-8092]:ExpressionStatement[7371-7549]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[7949-8090]:Block[7406-7547]"
      }, {
        "left" : "applyCommits(request.commitIndex())\n        .thenRun(() -> applyIndex(request.globalIndex()))\n        .thenRun(request::close);",
        "right" : "applyCommits(request.commitIndex())\n        .thenRun(() -> applyIndex(request.globalIndex()))\n        .thenRun(request::close);",
        "info" : "ExpressionStatement[7957-8084]:ExpressionStatement[7414-7541]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[8460-10976]:Block[7917-10433]"
      }, {
        "left" : "if (commitIndex != 0 && !context.getLog().isEmpty())",
        "right" : "if (commitIndex != 0 && !context.getLog().isEmpty())",
        "info" : "IfStatement[8915-10920]:IfStatement[8372-10377]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[8968-10864]:Block[8425-10321]"
      }, {
        "left" : "if (context.getCommitIndex() == 0 || commitIndex > context.getCommitIndex())",
        "right" : "if (context.getCommitIndex() == 0 || commitIndex > context.getCommitIndex())",
        "info" : "IfStatement[8976-10858]:IfStatement[8433-10315]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[9053-10858]:Block[8510-10315]"
      }, {
        "left" : "long lastIndex = context.getLog().lastIndex();",
        "right" : "long lastIndex = context.getLog().lastIndex();",
        "info" : "VariableDeclarationStatement[9063-9109]:VariableDeclarationStatement[8520-8566]"
      }, {
        "left" : "int commits = (int) (Math.min(commitIndex, lastIndex) - Math.max(context.getCommitIndex(), context.getLog().firstIndex()));",
        "right" : "int commits = (int) (Math.min(commitIndex, lastIndex) - Math.max(context.getCommitIndex(), context.getLog().firstIndex()));",
        "info" : "VariableDeclarationStatement[9118-9241]:VariableDeclarationStatement[8575-8698]"
      }, {
        "left" : "LOGGER.debug(\"{} - Applying {} commits\", context.getCluster().member().id(), commits);",
        "right" : "LOGGER.debug(\"{} - Applying {} commits\", context.getCluster().member().id(), commits);",
        "info" : "ExpressionStatement[9251-9337]:ExpressionStatement[8708-8794]"
      }, {
        "left" : "long previousCommitIndex = context.getCommitIndex();",
        "right" : "long previousCommitIndex = context.getCommitIndex();",
        "info" : "VariableDeclarationStatement[9432-9484]:VariableDeclarationStatement[8889-8941]"
      }, {
        "left" : "if (lastIndex != 0)",
        "right" : "if (lastIndex != 0)",
        "info" : "IfStatement[9493-10850]:IfStatement[8950-10307]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[9513-10850]:Block[8970-10307]"
      }, {
        "left" : "context.setCommitIndex(Math.min(Math.max(commitIndex, previousCommitIndex != 0 ? previousCommitIndex : commitIndex), lastIndex));",
        "right" : "context.setCommitIndex(Math.min(Math.max(commitIndex, previousCommitIndex != 0 ? previousCommitIndex : commitIndex), lastIndex));",
        "info" : "ExpressionStatement[9525-9654]:ExpressionStatement[8982-9111]"
      }, {
        "left" : "if (context.getCommitIndex() > previousCommitIndex)",
        "right" : "if (context.getCommitIndex() > previousCommitIndex)",
        "info" : "IfStatement[9818-10840]:IfStatement[9275-10297]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[9870-10840]:Block[9327-10297]"
      }, {
        "left" : "CompletableFuture<?>[] futures = new CompletableFuture[commits];",
        "right" : "CompletableFuture<?>[] futures = new CompletableFuture[commits];",
        "info" : "VariableDeclarationStatement[10041-10105]:VariableDeclarationStatement[9498-9562]"
      }, {
        "left" : "int j = 0;",
        "right" : "int j = 0;",
        "info" : "VariableDeclarationStatement[10118-10128]:VariableDeclarationStatement[9575-9585]"
      }, {
        "left" : "for (long i = Math.max(previousCommitIndex + 1, context.getLog().firstIndex()); i <= Math.min(context.getCommitIndex(), lastIndex); i++)",
        "right" : "for (long i = Math.max(previousCommitIndex + 1, context.getLog().firstIndex()); i <= Math.min(context.getCommitIndex(), lastIndex); i++)",
        "info" : "ForStatement[10141-10775]:ForStatement[9598-10232]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[10278-10775]:Block[9735-10232]"
      }, {
        "left" : "Entry entry = context.getLog().getEntry(i);",
        "right" : "Entry entry = context.getLog().getEntry(i);",
        "info" : "VariableDeclarationStatement[10294-10337]:VariableDeclarationStatement[9751-9794]"
      }, {
        "left" : "if (entry != null)",
        "right" : "if (entry != null)",
        "info" : "IfStatement[10352-10761]:IfStatement[9809-10218]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[10371-10761]:Block[9828-10218]"
      }, {
        "left" : "futures[j++] = context.getStateMachine().apply(entry).whenCompleteAsync((result, error) -> {\n                  if (isOpen() && error != null) {\n                    LOGGER.info(\"{} - An application error occurred: {}\", context.getCluster().member().id(), error);\n                  }\n                  entry.close();\n                }, context.getContext());",
        "right" : "futures[j++] = context.getStateMachine().apply(entry).whenCompleteAsync((result, error) -> {\n                  if (isOpen() && error != null) {\n                    LOGGER.info(\"{} - An application error occurred: {}\", context.getCluster().member().id(), error);\n                  }\n                  entry.close();\n                }, context.getContext());",
        "info" : "ExpressionStatement[10389-10745]:ExpressionStatement[9846-10202]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[10480-10721]:Block[9937-10178]"
      }, {
        "left" : "if (isOpen() && error != null)",
        "right" : "if (isOpen() && error != null)",
        "info" : "IfStatement[10500-10670]:IfStatement[9957-10127]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[10531-10670]:Block[9988-10127]"
      }, {
        "left" : "LOGGER.info(\"{} - An application error occurred: {}\", context.getCluster().member().id(), error);",
        "right" : "LOGGER.info(\"{} - An application error occurred: {}\", context.getCluster().member().id(), error);",
        "info" : "ExpressionStatement[10553-10650]:ExpressionStatement[10010-10107]"
      }, {
        "left" : "entry.close();",
        "right" : "entry.close();",
        "info" : "ExpressionStatement[10689-10703]:ExpressionStatement[10146-10160]"
      }, {
        "left" : "return CompletableFuture.allOf(futures);",
        "right" : "return CompletableFuture.allOf(futures);",
        "info" : "ReturnStatement[10788-10828]:ReturnStatement[10245-10285]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[10870-10920]:Block[10327-10377]"
      }, {
        "left" : "context.setCommitIndex(commitIndex);",
        "right" : "context.setCommitIndex(commitIndex);",
        "info" : "ExpressionStatement[10878-10914]:ExpressionStatement[10335-10371]"
      }, {
        "left" : "return CompletableFuture.completedFuture(null);",
        "right" : "return CompletableFuture.completedFuture(null);",
        "info" : "ReturnStatement[10925-10972]:ReturnStatement[10382-10429]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[11079-11160]:Block[10536-10617]"
      }, {
        "left" : "if (globalIndex > 0)",
        "right" : "if (globalIndex > 0)",
        "info" : "IfStatement[11085-11156]:IfStatement[10542-10613]"
      }, {
        "left" : "{}",
        "right" : "{}",
        "info" : "Block[11106-11156]:Block[10563-10613]"
      }, {
        "left" : "context.setGlobalIndex(globalIndex);",
        "right" : "context.setGlobalIndex(globalIndex);",
        "info" : "ExpressionStatement[11114-11150]:ExpressionStatement[10571-10607]"
      } ]
    }
  }
}