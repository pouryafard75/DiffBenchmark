{
  "intraFileMappings" : {
    "matchedElements" : [
 {
      "left" : "SingleSessionCommandService",
      "right" : "SingleSessionCommandService",
      "info" : "TypeDeclaration[2287-24417]:TypeDeclaration[2343-25169]"
    }, {
      "left" : "private static Logger              logger           = LoggerFactory.getLogger( SingleSessionCommandService.class );",
      "right" : "private static Logger              logger           = LoggerFactory.getLogger( SingleSessionCommandService.class );",
      "info" : "FieldDeclaration[2406-2521]:FieldDeclaration[2462-2577]"
    }, {
      "left" : "private SessionInfo                sessionInfo;",
      "right" : "private SessionInfo                sessionInfo;",
      "info" : "FieldDeclaration[2527-2574]:FieldDeclaration[2583-2630]"
    }, {
      "left" : "private SessionMarshallingHelper   marshallingHelper;",
      "right" : "private SessionMarshallingHelper   marshallingHelper;",
      "info" : "FieldDeclaration[2579-2632]:FieldDeclaration[2635-2688]"
    }, {
      "left" : "private KieSession                 ksession;",
      "right" : "private KieSession                 ksession;",
      "info" : "FieldDeclaration[2638-2682]:FieldDeclaration[2694-2738]"
    }, {
      "left" : "private Environment                env;",
      "right" : "private Environment                env;",
      "info" : "FieldDeclaration[2687-2726]:FieldDeclaration[2743-2782]"
    }, {
      "left" : "private KnowledgeCommandContext    kContext;",
      "right" : "private KnowledgeCommandContext    kContext;",
      "info" : "FieldDeclaration[2731-2775]:FieldDeclaration[2787-2831]"
    }, {
      "left" : "private CommandService             commandService;",
      "right" : "private CommandService             commandService;",
      "info" : "FieldDeclaration[2780-2830]:FieldDeclaration[2836-2886]"
    }, {
      "left" : "private TransactionManager         txm;",
      "right" : "private TransactionManager         txm;",
      "info" : "FieldDeclaration[2836-2875]:FieldDeclaration[2892-2931]"
    }, {
      "left" : "private PersistenceContextManager  jpm;",
      "right" : "private PersistenceContextManager  jpm;",
      "info" : "FieldDeclaration[2880-2919]:FieldDeclaration[2936-2975]"
    }, {
      "left" : "private volatile boolean           doRollback;",
      "right" : "private volatile boolean           doRollback;",
      "info" : "FieldDeclaration[2925-2971]:FieldDeclaration[2981-3027]"
    }, {
      "left" : "public void checkEnvironment(Environment env)",
      "right" : "public void checkEnvironment(Environment env)",
      "info" : "MethodDeclaration[2977-3386]:MethodDeclaration[3116-3525]"
    }, {
      "left" : "public SingleSessionCommandService(KieBase kbase,\n                                       KieSessionConfiguration conf,\n                                       Environment env)",
      "right" : "public SingleSessionCommandService(KieBase kbase,\n                                       KieSessionConfiguration conf,\n                                       Environment env)",
      "info" : "MethodDeclaration[3392-4979]:MethodDeclaration[3531-5118]"
    }, {
      "left" : "protected void initNewKnowledgeSession(KieBase kbase, KieSessionConfiguration conf)",
      "right" : "protected void initNewKnowledgeSession(KieBase kbase, KieSessionConfiguration conf)",
      "info" : "MethodDeclaration[4985-6630]:MethodDeclaration[5124-6769]"
    }, {
      "left" : "public SingleSessionCommandService( Long sessionId,\n                                       KieBase kbase,\n                                       KieSessionConfiguration conf,\n                                       Environment env)",
      "right" : "public SingleSessionCommandService( Long sessionId,\n                                       KieBase kbase,\n                                       KieSessionConfiguration conf,\n                                       Environment env)",
      "info" : "MethodDeclaration[6640-8408]:MethodDeclaration[6779-8547]"
    }, {
      "left" : "protected void initExistingKnowledgeSession(Long sessionId,\n                                KieBase kbase,\n                                KieSessionConfiguration conf,\n                                PersistenceContext persistenceContext)",
      "right" : "protected void initExistingKnowledgeSession(Long sessionId,\n                                KieBase kbase,\n                                KieSessionConfiguration conf,\n                                PersistenceContext persistenceContext)",
      "info" : "MethodDeclaration[8414-11803]:MethodDeclaration[8553-12153]"
    }, {
      "left" : "public void initTransactionManager(Environment env)",
      "right" : "public void initTransactionManager(Environment env)",
      "info" : "MethodDeclaration[11809-15797]:MethodDeclaration[12159-16147]"
    }, {
      "left" : "private static String SPRING_TM_CLASSNAME = \"org.springframework.transaction.support.AbstractPlatformTransactionManager\";",
      "right" : "private static String SPRING_TM_CLASSNAME = \"org.springframework.transaction.support.AbstractPlatformTransactionManager\";",
      "info" : "FieldDeclaration[15803-15924]:FieldDeclaration[16153-16274]"
    }, {
      "left" : "public static boolean isSpringTransactionManager( Class<?> clazz )",
      "right" : "public static boolean isSpringTransactionManager( Class<?> clazz )",
      "info" : "MethodDeclaration[15930-16297]:MethodDeclaration[16280-16647]"
    }, {
      "left" : "EndOperationListenerImpl",
      "right" : "EndOperationListenerImpl",
      "info" : "TypeDeclaration[16303-16872]:TypeDeclaration[16653-17222]"
    }, {
      "left" : "private TransactionManager txm;",
      "right" : "private TransactionManager txm;",
      "info" : "FieldDeclaration[16406-16437]:FieldDeclaration[16756-16787]"
    }, {
      "left" : "private SessionInfo info;",
      "right" : "private SessionInfo info;",
      "info" : "FieldDeclaration[16446-16471]:FieldDeclaration[16796-16821]"
    }, {
      "left" : "public EndOperationListenerImpl(TransactionManager txm, SessionInfo info)",
      "right" : "public EndOperationListenerImpl(TransactionManager txm, SessionInfo info)",
      "info" : "MethodDeclaration[16481-16624]:MethodDeclaration[16831-16974]"
    }, {
      "left" : "public void endOperation(InternalKnowledgeRuntime kruntime)",
      "right" : "public void endOperation(InternalKnowledgeRuntime kruntime)",
      "info" : "MethodDeclaration[16634-16866]:MethodDeclaration[16984-17216]"
    }, {
      "left" : "public Context getContext()",
      "right" : "public Context getContext()",
      "info" : "MethodDeclaration[16878-16943]:MethodDeclaration[17228-17293]"
    }, {
      "left" : "public synchronized <T> T execute(Command<T> command)",
      "right" : "public synchronized <T> T execute(Command<T> command)",
      "info" : "MethodDeclaration[16949-17058]:MethodDeclaration[17390-17499]"
    }, {
      "left" : "private void rollbackTransaction(Exception t1,\n                                     boolean transactionOwner)",
      "right" : "private void rollbackTransaction(Exception t1,\n                                     boolean transactionOwner)",
      "info" : "MethodDeclaration[17064-17577]:MethodDeclaration[17505-18018]"
    }, {
      "left" : "public void dispose()",
      "right" : "public void dispose()",
      "info" : "MethodDeclaration[17583-17688]:MethodDeclaration[18024-18164]"
    }, {
      "left" : "public void destroy()",
      "right" : "public void destroy()",
      "info" : "MethodDeclaration[17694-18634]:MethodDeclaration[18170-19110]"
    }, {
      "left" : "public Long getSessionId()",
      "right" : "public Long getSessionId()",
      "info" : "MethodDeclaration[18640-18710]:MethodDeclaration[19116-19186]"
    }, {
      "left" : "private void registerRollbackSync()",
      "right" : "private void registerRollbackSync()",
      "info" : "MethodDeclaration[18716-18871]:MethodDeclaration[19192-19347]"
    }, {
      "left" : "SynchronizationImpl",
      "right" : "SynchronizationImpl",
      "info" : "TypeDeclaration[18877-20907]:TypeDeclaration[19353-21383]"
    }, {
      "left" : "SingleSessionCommandService service;",
      "right" : "SingleSessionCommandService service;",
      "info" : "FieldDeclaration[18987-19023]:FieldDeclaration[19463-19499]"
    }, {
      "left" : "public SynchronizationImpl(SingleSessionCommandService service)",
      "right" : "public SynchronizationImpl(SingleSessionCommandService service)",
      "info" : "MethodDeclaration[19033-19209]:MethodDeclaration[19509-19685]"
    }, {
      "left" : "public void afterCompletion(int status)",
      "right" : "public void afterCompletion(int status)",
      "info" : "MethodDeclaration[19219-20605]:MethodDeclaration[19695-21081]"
    }, {
      "left" : "public void beforeCompletion()",
      "right" : "public void beforeCompletion()",
      "info" : "MethodDeclaration[20615-20681]:MethodDeclaration[21091-21157]"
    }, {
      "left" : "public String toString()",
      "right" : "public String toString()",
      "info" : "MethodDeclaration[20691-20901]:MethodDeclaration[21167-21377]"
    }, {
      "left" : "public KieSession getKieSession()",
      "right" : "public KieSession getKieSession()",
      "info" : "MethodDeclaration[20913-20984]:MethodDeclaration[21389-21460]"
    }, {
      "left" : "public void addInterceptor(Interceptor interceptor)",
      "right" : "protected void addInterceptor(Interceptor interceptor, boolean store)",
      "info" : "MethodDeclaration[20990-21144]:MethodDeclaration[21574-21896]"
    }, {
      "left" : "private void rollback()",
      "right" : "private void rollback()",
      "info" : "MethodDeclaration[21150-21213]:MethodDeclaration[21902-21965]"
    }, {
      "left" : "private void registerUpdateSync()",
      "right" : "private void registerUpdateSync()",
      "info" : "MethodDeclaration[21219-21586]:MethodDeclaration[21971-22338]"
    }, {
      "left" : "TransactionInterceptor",
      "right" : "TransactionInterceptor",
      "info" : "TypeDeclaration[21592-24414]:TypeDeclaration[22344-25166]"
    }, {
      "left" : "public TransactionInterceptor(Context context)",
      "right" : "public TransactionInterceptor(Context context)",
      "info" : "MethodDeclaration[21668-21783]:MethodDeclaration[22420-22535]"
    }, {
      "left" : "public <T> T execute(Command<T> command)",
      "right" : "public <T> T execute(Command<T> command)",
      "info" : "MethodDeclaration[21793-24408]:MethodDeclaration[22545-25160]"
    } ],
    "mappings" : [
 {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[2287-2293]:Modifier[2343-2349]"
    }, {
      "left" : "class",
      "right" : "class",
      "info" : "TYPE_DECLARATION_KIND[2294-2299]:TYPE_DECLARATION_KIND[2350-2355]"
    }, {
      "left" : "SingleSessionCommandService",
      "right" : "SingleSessionCommandService",
      "info" : "SimpleName[2300-2327]:SimpleName[2356-2383]"
    }, {
      "left" : "org.drools.core.command.SingleSessionCommandService",
      "right" : "org.drools.core.command.SingleSessionCommandService",
      "info" : "SimpleType[2347-2398]:SimpleType[2403-2454]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[2977-2983]:Modifier[3116-3122]"
    }, {
      "left" : "void",
      "right" : "void",
      "info" : "PrimitiveType[2984-2988]:PrimitiveType[3123-3127]"
    }, {
      "left" : "checkEnvironment",
      "right" : "checkEnvironment",
      "info" : "SimpleName[2989-3005]:SimpleName[3128-3144]"
    }, {
      "left" : "Environment env",
      "right" : "Environment env",
      "info" : "SingleVariableDeclaration[3006-3021]:SingleVariableDeclaration[3145-3160]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[3023-3386]:Block[3162-3525]"
    }, {
      "left" : "if ( env.get( EnvironmentName.ENTITY_MANAGER_FACTORY ) == null &&\n             env.get( EnvironmentName.PERSISTENCE_CONTEXT_MANAGER ) == null)",
      "right" : "if ( env.get( EnvironmentName.ENTITY_MANAGER_FACTORY ) == null &&\n             env.get( EnvironmentName.PERSISTENCE_CONTEXT_MANAGER ) == null)",
      "info" : "IfStatement[3033-3380]:IfStatement[3172-3519]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[3177-3380]:Block[3316-3519]"
    }, {
      "left" : "throw new IllegalArgumentException( \"Environment must have an EntityManagerFactory \" +\n                                                \"or a PersistenceContextManager instance\" );",
      "right" : "throw new IllegalArgumentException( \"Environment must have an EntityManagerFactory \" +\n                                                \"or a PersistenceContextManager instance\" );",
      "info" : "ThrowStatement[3191-3370]:ThrowStatement[3330-3509]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[3392-3398]:Modifier[3531-3537]"
    }, {
      "left" : "SingleSessionCommandService",
      "right" : "SingleSessionCommandService",
      "info" : "SimpleName[3399-3426]:SimpleName[3538-3565]"
    }, {
      "left" : "KieBase kbase",
      "right" : "KieBase kbase",
      "info" : "SingleVariableDeclaration[3427-3440]:SingleVariableDeclaration[3566-3579]"
    }, {
      "left" : "KieSessionConfiguration conf",
      "right" : "KieSessionConfiguration conf",
      "info" : "SingleVariableDeclaration[3481-3509]:SingleVariableDeclaration[3620-3648]"
    }, {
      "left" : "Environment env",
      "right" : "Environment env",
      "info" : "SingleVariableDeclaration[3550-3565]:SingleVariableDeclaration[3689-3704]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[3567-4979]:Block[3706-5118]"
    }, {
      "left" : "if ( conf == null)",
      "right" : "if ( conf == null)",
      "info" : "IfStatement[3577-3655]:IfStatement[3716-3794]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[3597-3655]:Block[3736-3794]"
    }, {
      "left" : "conf = new SessionConfiguration();",
      "right" : "conf = new SessionConfiguration();",
      "info" : "ExpressionStatement[3611-3645]:ExpressionStatement[3750-3784]"
    }, {
      "left" : "this.env = env;",
      "right" : "this.env = env;",
      "info" : "ExpressionStatement[3664-3679]:ExpressionStatement[3803-3818]"
    }, {
      "left" : "checkEnvironment( this.env );",
      "right" : "checkEnvironment( this.env );",
      "info" : "ExpressionStatement[3689-3718]:ExpressionStatement[3828-3857]"
    }, {
      "left" : "initTransactionManager( this.env );",
      "right" : "initTransactionManager( this.env );",
      "info" : "ExpressionStatement[3728-3763]:ExpressionStatement[3867-3902]"
    }, {
      "left" : "initNewKnowledgeSession(kbase, conf);",
      "right" : "initNewKnowledgeSession(kbase, conf);",
      "info" : "ExpressionStatement[3781-3818]:ExpressionStatement[3920-3957]"
    }, {
      "left" : "PersistenceContext persistenceContext = jpm.getApplicationScopedPersistenceContext();",
      "right" : "PersistenceContext persistenceContext = jpm.getApplicationScopedPersistenceContext();",
      "info" : "VariableDeclarationStatement[3986-4071]:VariableDeclarationStatement[4125-4210]"
    }, {
      "left" : "boolean transactionOwner = false;",
      "right" : "boolean transactionOwner = false;",
      "info" : "VariableDeclarationStatement[4080-4113]:VariableDeclarationStatement[4219-4252]"
    }, {
      "left" : "try{...}",
      "right" : "try{...}",
      "info" : "TryStatement[4122-4821]:TryStatement[4261-4960]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[4126-4425]:Block[4265-4564]"
    }, {
      "left" : "transactionOwner = txm.begin();",
      "right" : "transactionOwner = txm.begin();",
      "info" : "ExpressionStatement[4140-4171]:ExpressionStatement[4279-4310]"
    }, {
      "left" : "registerRollbackSync();",
      "right" : "registerRollbackSync();",
      "info" : "ExpressionStatement[4184-4207]:ExpressionStatement[4323-4346]"
    }, {
      "left" : "persistenceContext.joinTransaction();",
      "right" : "persistenceContext.joinTransaction();",
      "info" : "ExpressionStatement[4221-4258]:ExpressionStatement[4360-4397]"
    }, {
      "left" : "this.sessionInfo = persistenceContext.persist( this.sessionInfo );",
      "right" : "this.sessionInfo = persistenceContext.persist( this.sessionInfo );",
      "info" : "ExpressionStatement[4271-4337]:ExpressionStatement[4410-4476]"
    }, {
      "left" : "registerUpdateSync();",
      "right" : "registerUpdateSync();",
      "info" : "ExpressionStatement[4350-4371]:ExpressionStatement[4489-4510]"
    }, {
      "left" : "txm.commit( transactionOwner );",
      "right" : "txm.commit( transactionOwner );",
      "info" : "ExpressionStatement[4384-4415]:ExpressionStatement[4523-4554]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[4456-4579]:Block[4595-4718]"
    }, {
      "left" : "rollbackTransaction( re,\n                                 transactionOwner );",
      "right" : "rollbackTransaction( re,\n                                 transactionOwner );",
      "info" : "ExpressionStatement[4470-4547]:ExpressionStatement[4609-4686]"
    }, {
      "left" : "throw re;",
      "right" : "throw re;",
      "info" : "ThrowStatement[4560-4569]:ThrowStatement[4699-4708]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[4603-4821]:Block[4742-4960]"
    }, {
      "left" : "rollbackTransaction( t1,\n                                 transactionOwner );",
      "right" : "rollbackTransaction( t1,\n                                 transactionOwner );",
      "info" : "ExpressionStatement[4617-4694]:ExpressionStatement[4756-4833]"
    }, {
      "left" : "throw new RuntimeException( \"Wrapped exception see cause\",\n                                        t1 );",
      "right" : "throw new RuntimeException( \"Wrapped exception see cause\",\n                                        t1 );",
      "info" : "ThrowStatement[4707-4811]:ThrowStatement[4846-4950]"
    }, {
      "left" : "((InternalKnowledgeRuntime) ksession).setId( this.sessionInfo.getId());",
      "right" : "((InternalKnowledgeRuntime) ksession).setId( this.sessionInfo.getId());",
      "info" : "ExpressionStatement[4902-4973]:ExpressionStatement[5041-5112]"
    }, {
      "left" : "protected",
      "right" : "protected",
      "info" : "Modifier[4985-4994]:Modifier[5124-5133]"
    }, {
      "left" : "void",
      "right" : "void",
      "info" : "PrimitiveType[4995-4999]:PrimitiveType[5134-5138]"
    }, {
      "left" : "initNewKnowledgeSession",
      "right" : "initNewKnowledgeSession",
      "info" : "SimpleName[5000-5023]:SimpleName[5139-5162]"
    }, {
      "left" : "KieBase kbase",
      "right" : "KieBase kbase",
      "info" : "SingleVariableDeclaration[5024-5037]:SingleVariableDeclaration[5163-5176]"
    }, {
      "left" : "KieSessionConfiguration conf",
      "right" : "KieSessionConfiguration conf",
      "info" : "SingleVariableDeclaration[5039-5067]:SingleVariableDeclaration[5178-5206]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[5069-6630]:Block[5208-6769]"
    }, {
      "left" : "this.sessionInfo = new SessionInfo();",
      "right" : "this.sessionInfo = new SessionInfo();",
      "info" : "ExpressionStatement[5080-5117]:ExpressionStatement[5219-5256]"
    }, {
      "left" : "this.ksession = kbase.newKieSession( conf,\n                                             this.env );",
      "right" : "this.ksession = kbase.newKieSession( conf,\n                                             this.env );",
      "info" : "ExpressionStatement[5180-5279]:ExpressionStatement[5319-5418]"
    }, {
      "left" : "this.marshallingHelper = new SessionMarshallingHelper( this.ksession, conf );",
      "right" : "this.marshallingHelper = new SessionMarshallingHelper( this.ksession, conf );",
      "info" : "ExpressionStatement[5289-5366]:ExpressionStatement[5428-5505]"
    }, {
      "left" : "MarshallingConfigurationImpl config = (MarshallingConfigurationImpl) this.marshallingHelper.getMarshaller().getMarshallingConfiguration();",
      "right" : "MarshallingConfigurationImpl config = (MarshallingConfigurationImpl) this.marshallingHelper.getMarshaller().getMarshallingConfiguration();",
      "info" : "VariableDeclarationStatement[5384-5522]:VariableDeclarationStatement[5523-5661]"
    }, {
      "left" : "config.setMarshallProcessInstances( false );",
      "right" : "config.setMarshallProcessInstances( false );",
      "info" : "ExpressionStatement[5531-5575]:ExpressionStatement[5670-5714]"
    }, {
      "left" : "config.setMarshallWorkItems( false );",
      "right" : "config.setMarshallWorkItems( false );",
      "info" : "ExpressionStatement[5584-5621]:ExpressionStatement[5723-5760]"
    }, {
      "left" : "this.sessionInfo.setJPASessionMashallingHelper( this.marshallingHelper );",
      "right" : "this.sessionInfo.setJPASessionMashallingHelper( this.marshallingHelper );",
      "info" : "ExpressionStatement[5631-5704]:ExpressionStatement[5770-5843]"
    }, {
      "left" : "((InternalKnowledgeRuntime) this.ksession).setEndOperationListener( new EndOperationListenerImpl(this.txm, this.sessionInfo ) );",
      "right" : "((InternalKnowledgeRuntime) this.ksession).setEndOperationListener( new EndOperationListenerImpl(this.txm, this.sessionInfo ) );",
      "info" : "ExpressionStatement[5714-5842]:ExpressionStatement[5853-5981]"
    }, {
      "left" : "this.kContext = new FixedKnowledgeCommandContext( new ContextImpl( \"ksession\", null),\n                                                          null,\n                                                          null,\n                                                          this.ksession,\n                                                          null );",
      "right" : "this.kContext = new FixedKnowledgeCommandContext( new ContextImpl( \"ksession\", null),\n                                                          null,\n                                                          null,\n                                                          this.ksession,\n                                                          null );",
      "info" : "ExpressionStatement[5860-6212]:ExpressionStatement[5999-6351]"
    }, {
      "left" : "this.commandService = new TransactionInterceptor(kContext);",
      "right" : "this.commandService = new TransactionInterceptor(kContext);",
      "info" : "ExpressionStatement[6222-6281]:ExpressionStatement[6361-6420]"
    }, {
      "left" : "TimerJobFactoryManager timerJobFactoryManager = ((InternalKnowledgeRuntime) ksession ).getTimerService().getTimerJobFactoryManager();",
      "right" : "TimerJobFactoryManager timerJobFactoryManager = ((InternalKnowledgeRuntime) ksession ).getTimerService().getTimerJobFactoryManager();",
      "info" : "VariableDeclarationStatement[6291-6424]:VariableDeclarationStatement[6430-6563]"
    }, {
      "left" : "if (timerJobFactoryManager instanceof CommandServiceTimerJobFactoryManager)",
      "right" : "if (timerJobFactoryManager instanceof CommandServiceTimerJobFactoryManager)",
      "info" : "IfStatement[6433-6624]:IfStatement[6572-6763]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[6509-6624]:Block[6648-6763]"
    }, {
      "left" : "( (CommandServiceTimerJobFactoryManager) timerJobFactoryManager ).setCommandService( this );",
      "right" : "( (CommandServiceTimerJobFactoryManager) timerJobFactoryManager ).setCommandService( this );",
      "info" : "ExpressionStatement[6522-6614]:ExpressionStatement[6661-6753]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[6640-6646]:Modifier[6779-6785]"
    }, {
      "left" : "SingleSessionCommandService",
      "right" : "SingleSessionCommandService",
      "info" : "SimpleName[6647-6674]:SimpleName[6786-6813]"
    }, {
      "left" : "Long sessionId",
      "right" : "Long sessionId",
      "info" : "SingleVariableDeclaration[6676-6690]:SingleVariableDeclaration[6815-6829]"
    }, {
      "left" : "KieBase kbase",
      "right" : "KieBase kbase",
      "info" : "SingleVariableDeclaration[6731-6744]:SingleVariableDeclaration[6870-6883]"
    }, {
      "left" : "KieSessionConfiguration conf",
      "right" : "KieSessionConfiguration conf",
      "info" : "SingleVariableDeclaration[6785-6813]:SingleVariableDeclaration[6924-6952]"
    }, {
      "left" : "Environment env",
      "right" : "Environment env",
      "info" : "SingleVariableDeclaration[6854-6869]:SingleVariableDeclaration[6993-7008]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[6871-8408]:Block[7010-8547]"
    }, {
      "left" : "if ( conf == null)",
      "right" : "if ( conf == null)",
      "info" : "IfStatement[6881-6959]:IfStatement[7020-7098]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[6901-6959]:Block[7040-7098]"
    }, {
      "left" : "conf = new SessionConfiguration();",
      "right" : "conf = new SessionConfiguration();",
      "info" : "ExpressionStatement[6915-6949]:ExpressionStatement[7054-7088]"
    }, {
      "left" : "this.env = env;",
      "right" : "this.env = env;",
      "info" : "ExpressionStatement[6969-6984]:ExpressionStatement[7108-7123]"
    }, {
      "left" : "checkEnvironment( this.env );",
      "right" : "checkEnvironment( this.env );",
      "info" : "ExpressionStatement[6994-7023]:ExpressionStatement[7133-7162]"
    }, {
      "left" : "initTransactionManager( this.env );",
      "right" : "initTransactionManager( this.env );",
      "info" : "ExpressionStatement[7033-7068]:ExpressionStatement[7172-7207]"
    }, {
      "left" : "PersistenceContext persistenceContext = jpm.getApplicationScopedPersistenceContext();",
      "right" : "PersistenceContext persistenceContext = jpm.getApplicationScopedPersistenceContext();",
      "info" : "VariableDeclarationStatement[7145-7230]:VariableDeclarationStatement[7284-7369]"
    }, {
      "left" : "boolean transactionOwner = false;",
      "right" : "boolean transactionOwner = false;",
      "info" : "VariableDeclarationStatement[7240-7273]:VariableDeclarationStatement[7379-7412]"
    }, {
      "left" : "try{...}",
      "right" : "try{...}",
      "info" : "TryStatement[7282-8402]:TryStatement[7421-8541]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[7286-7672]:Block[7425-7811]"
    }, {
      "left" : "transactionOwner = txm.begin();",
      "right" : "transactionOwner = txm.begin();",
      "info" : "ExpressionStatement[7300-7331]:ExpressionStatement[7439-7470]"
    }, {
      "left" : "registerRollbackSync();",
      "right" : "registerRollbackSync();",
      "info" : "ExpressionStatement[7344-7367]:ExpressionStatement[7483-7506]"
    }, {
      "left" : "persistenceContext.joinTransaction();",
      "right" : "persistenceContext.joinTransaction();",
      "info" : "ExpressionStatement[7381-7418]:ExpressionStatement[7520-7557]"
    }, {
      "left" : "initExistingKnowledgeSession( sessionId,\n                          kbase,\n                          conf,\n                          persistenceContext );",
      "right" : "initExistingKnowledgeSession( sessionId,\n                          kbase,\n                          conf,\n                          persistenceContext );",
      "info" : "ExpressionStatement[7431-7584]:ExpressionStatement[7570-7723]"
    }, {
      "left" : "registerUpdateSync();",
      "right" : "registerUpdateSync();",
      "info" : "ExpressionStatement[7597-7618]:ExpressionStatement[7736-7757]"
    }, {
      "left" : "txm.commit( transactionOwner );",
      "right" : "txm.commit( transactionOwner );",
      "info" : "ExpressionStatement[7631-7662]:ExpressionStatement[7770-7801]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[7707-8006]:Block[7846-8145]"
    }, {
      "left" : "if (transactionOwner)",
      "right" : "if (transactionOwner)",
      "info" : "IfStatement[7877-7974]:IfStatement[8016-8113]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[7899-7974]:Block[8038-8113]"
    }, {
      "left" : "rollbackTransaction( e, transactionOwner );",
      "right" : "rollbackTransaction( e, transactionOwner );",
      "info" : "ExpressionStatement[7917-7960]:ExpressionStatement[8056-8099]"
    }, {
      "left" : "throw e;",
      "right" : "throw e;",
      "info" : "ThrowStatement[7987-7995]:ThrowStatement[8126-8134]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[8037-8160]:Block[8176-8299]"
    }, {
      "left" : "rollbackTransaction( re,\n                                 transactionOwner );",
      "right" : "rollbackTransaction( re,\n                                 transactionOwner );",
      "info" : "ExpressionStatement[8051-8128]:ExpressionStatement[8190-8267]"
    }, {
      "left" : "throw re;",
      "right" : "throw re;",
      "info" : "ThrowStatement[8141-8150]:ThrowStatement[8280-8289]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[8184-8402]:Block[8323-8541]"
    }, {
      "left" : "rollbackTransaction( t1,\n                                 transactionOwner );",
      "right" : "rollbackTransaction( t1,\n                                 transactionOwner );",
      "info" : "ExpressionStatement[8198-8275]:ExpressionStatement[8337-8414]"
    }, {
      "left" : "throw new RuntimeException( \"Wrapped exception see cause\",\n                                        t1 );",
      "right" : "throw new RuntimeException( \"Wrapped exception see cause\",\n                                        t1 );",
      "info" : "ThrowStatement[8288-8392]:ThrowStatement[8427-8531]"
    }, {
      "left" : "protected",
      "right" : "protected",
      "info" : "Modifier[8414-8423]:Modifier[8553-8562]"
    }, {
      "left" : "void",
      "right" : "void",
      "info" : "PrimitiveType[8424-8428]:PrimitiveType[8563-8567]"
    }, {
      "left" : "initExistingKnowledgeSession",
      "right" : "initExistingKnowledgeSession",
      "info" : "SimpleName[8429-8457]:SimpleName[8568-8596]"
    }, {
      "left" : "Long sessionId",
      "right" : "Long sessionId",
      "info" : "SingleVariableDeclaration[8458-8472]:SingleVariableDeclaration[8597-8611]"
    }, {
      "left" : "KieBase kbase",
      "right" : "KieBase kbase",
      "info" : "SingleVariableDeclaration[8506-8519]:SingleVariableDeclaration[8645-8658]"
    }, {
      "left" : "KieSessionConfiguration conf",
      "right" : "KieSessionConfiguration conf",
      "info" : "SingleVariableDeclaration[8553-8581]:SingleVariableDeclaration[8692-8720]"
    }, {
      "left" : "PersistenceContext persistenceContext",
      "right" : "PersistenceContext persistenceContext",
      "info" : "SingleVariableDeclaration[8615-8652]:SingleVariableDeclaration[8754-8791]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[8654-11803]:Block[8793-12153]"
    }, {
      "left" : "if ( !doRollback && this.ksession != null)",
      "right" : "if ( !doRollback && this.ksession != null)",
      "info" : "IfStatement[8665-8777]:IfStatement[8804-8916]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[8709-8777]:Block[8848-8916]"
    }, {
      "left" : "return;",
      "right" : "return;",
      "info" : "ReturnStatement[8723-8730]:ReturnStatement[8862-8869]"
    }, {
      "left" : "this.doRollback = false;",
      "right" : "this.doRollback = false;",
      "info" : "ExpressionStatement[8787-8811]:ExpressionStatement[8926-8950]"
    }, {
      "left" : "try{...}",
      "right" : "try{...}",
      "info" : "TryStatement[8820-9183]:TryStatement[8959-9322]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[8824-9005]:Block[8963-9144]"
    }, {
      "left" : "this.sessionInfo = persistenceContext.findSessionInfo( sessionId );",
      "right" : "this.sessionInfo = persistenceContext.findSessionInfo( sessionId );",
      "info" : "ExpressionStatement[8928-8995]:ExpressionStatement[9067-9134]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[9028-9183]:Block[9167-9322]"
    }, {
      "left" : "throw new SessionNotFoundException( \"Could not find session data for id \" + sessionId,\n                                        e );",
      "right" : "throw new SessionNotFoundException( \"Could not find session data for id \" + sessionId,\n                                        e );",
      "info" : "ThrowStatement[9042-9173]:ThrowStatement[9181-9312]"
    }, {
      "left" : "if ( sessionInfo == null)",
      "right" : "if ( sessionInfo == null)",
      "info" : "IfStatement[9192-9331]:IfStatement[9331-9470]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[9219-9331]:Block[9358-9470]"
    }, {
      "left" : "throw new SessionNotFoundException( \"Could not find session data for id \" + sessionId );",
      "right" : "throw new SessionNotFoundException( \"Could not find session data for id \" + sessionId );",
      "info" : "ThrowStatement[9233-9321]:ThrowStatement[9372-9460]"
    }, {
      "left" : "if ( this.marshallingHelper == null)",
      "right" : "if ( this.marshallingHelper == null)",
      "info" : "IfStatement[9341-9965]:IfStatement[9480-10104]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[9379-9965]:Block[9518-10104]"
    }, {
      "left" : "this.marshallingHelper = new SessionMarshallingHelper( kbase,\n                                                                   conf,\n                                                                   env );",
      "right" : "this.marshallingHelper = new SessionMarshallingHelper( kbase,\n                                                                   conf,\n                                                                   env );",
      "info" : "ExpressionStatement[9469-9677]:ExpressionStatement[9608-9816]"
    }, {
      "left" : "MarshallingConfigurationImpl config = (MarshallingConfigurationImpl)\n                    this.marshallingHelper.getMarshaller().getMarshallingConfiguration();",
      "right" : "MarshallingConfigurationImpl config = (MarshallingConfigurationImpl)\n                    this.marshallingHelper.getMarshaller().getMarshallingConfiguration();",
      "info" : "VariableDeclarationStatement[9690-9848]:VariableDeclarationStatement[9829-9987]"
    }, {
      "left" : "config.setMarshallProcessInstances( false );",
      "right" : "config.setMarshallProcessInstances( false );",
      "info" : "ExpressionStatement[9861-9905]:ExpressionStatement[10000-10044]"
    }, {
      "left" : "config.setMarshallWorkItems( false );",
      "right" : "config.setMarshallWorkItems( false );",
      "info" : "ExpressionStatement[9918-9955]:ExpressionStatement[10057-10094]"
    }, {
      "left" : "this.sessionInfo.setJPASessionMashallingHelper(this.marshallingHelper);",
      "right" : "this.sessionInfo.setJPASessionMashallingHelper(this.marshallingHelper);",
      "info" : "ExpressionStatement[9975-10046]:ExpressionStatement[10114-10185]"
    }, {
      "left" : "this.ksession = this.marshallingHelper.loadSnapshot( this.sessionInfo.getData(), this.ksession );",
      "right" : "this.ksession = this.marshallingHelper.loadSnapshot( this.sessionInfo.getData(), this.ksession );",
      "info" : "ExpressionStatement[10149-10246]:ExpressionStatement[10288-10385]"
    }, {
      "left" : "InternalKnowledgeRuntime kruntime = ((InternalKnowledgeRuntime) ksession);",
      "right" : "InternalKnowledgeRuntime kruntime = ((InternalKnowledgeRuntime) ksession);",
      "info" : "VariableDeclarationStatement[10256-10330]:VariableDeclarationStatement[10395-10469]"
    }, {
      "left" : "TimerJobFactoryManager timerJobFactoryManager = ((InternalKnowledgeRuntime) ksession ).getTimerService().getTimerJobFactoryManager();",
      "right" : "TimerJobFactoryManager timerJobFactoryManager = ((InternalKnowledgeRuntime) ksession ).getTimerService().getTimerJobFactoryManager();",
      "info" : "VariableDeclarationStatement[10658-10791]:VariableDeclarationStatement[10797-10930]"
    }, {
      "left" : "if (timerJobFactoryManager instanceof CommandServiceTimerJobFactoryManager)",
      "right" : "if (timerJobFactoryManager instanceof CommandServiceTimerJobFactoryManager)",
      "info" : "IfStatement[10800-10992]:IfStatement[10939-11131]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[10876-10992]:Block[11015-11131]"
    }, {
      "left" : "( (CommandServiceTimerJobFactoryManager) timerJobFactoryManager ).setCommandService( this );",
      "right" : "( (CommandServiceTimerJobFactoryManager) timerJobFactoryManager ).setCommandService( this );",
      "info" : "ExpressionStatement[10890-10982]:ExpressionStatement[11029-11121]"
    }, {
      "left" : "kruntime.setId( this.sessionInfo.getId() );",
      "right" : "kruntime.setId( this.sessionInfo.getId() );",
      "info" : "ExpressionStatement[11073-11116]:ExpressionStatement[11212-11255]"
    }, {
      "left" : "kruntime.setEndOperationListener( new EndOperationListenerImpl( this.txm, this.sessionInfo ) );",
      "right" : "kruntime.setEndOperationListener( new EndOperationListenerImpl( this.txm, this.sessionInfo ) );",
      "info" : "ExpressionStatement[11126-11221]:ExpressionStatement[11265-11360]"
    }, {
      "left" : "if ( this.kContext == null)",
      "right" : "if ( this.kContext == null)",
      "info" : "IfStatement[11231-11728]:IfStatement[11370-11867]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[11260-11728]:Block[11399-11867]"
    }, {
      "left" : "this.kContext = new FixedKnowledgeCommandContext( new ContextImpl( \"ksession\", null),\n                                                              null,\n                                                              null,\n                                                              this.ksession,\n                                                              null );",
      "right" : "this.kContext = new FixedKnowledgeCommandContext( new ContextImpl( \"ksession\", null),\n                                                              null,\n                                                              null,\n                                                              this.ksession,\n                                                              null );",
      "info" : "ExpressionStatement[11350-11718]:ExpressionStatement[11489-11857]"
    }, {
      "left" : "this.commandService = new TransactionInterceptor(kContext);",
      "right" : "this.commandService = new TransactionInterceptor(kContext);",
      "info" : "ExpressionStatement[11738-11797]:ExpressionStatement[11877-11936]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[11809-11815]:Modifier[12159-12165]"
    }, {
      "left" : "void",
      "right" : "void",
      "info" : "PrimitiveType[11816-11820]:PrimitiveType[12166-12170]"
    }, {
      "left" : "initTransactionManager",
      "right" : "initTransactionManager",
      "info" : "SimpleName[11821-11843]:SimpleName[12171-12193]"
    }, {
      "left" : "Environment env",
      "right" : "Environment env",
      "info" : "SingleVariableDeclaration[11844-11859]:SingleVariableDeclaration[12194-12209]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[11861-15797]:Block[12211-16147]"
    }, {
      "left" : "Object tm = env.get( EnvironmentName.TRANSACTION_MANAGER );",
      "right" : "Object tm = env.get( EnvironmentName.TRANSACTION_MANAGER );",
      "info" : "VariableDeclarationStatement[11871-11930]:VariableDeclarationStatement[12221-12280]"
    }, {
      "left" : "if ( env.get( EnvironmentName.PERSISTENCE_CONTEXT_MANAGER ) != null &&\n             env.get( EnvironmentName.TRANSACTION_MANAGER ) != null)",
      "right" : "if ( env.get( EnvironmentName.PERSISTENCE_CONTEXT_MANAGER ) != null &&\n             env.get( EnvironmentName.TRANSACTION_MANAGER ) != null)",
      "info" : "IfStatement[11939-15791]:IfStatement[12289-16141]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[12080-12246]:Block[12430-12596]"
    }, {
      "left" : "this.txm = (TransactionManager) tm;",
      "right" : "this.txm = (TransactionManager) tm;",
      "info" : "ExpressionStatement[12094-12129]:ExpressionStatement[12444-12479]"
    }, {
      "left" : "this.jpm = (PersistenceContextManager) env.get( EnvironmentName.PERSISTENCE_CONTEXT_MANAGER );",
      "right" : "this.jpm = (PersistenceContextManager) env.get( EnvironmentName.PERSISTENCE_CONTEXT_MANAGER );",
      "info" : "ExpressionStatement[12142-12236]:ExpressionStatement[12492-12586]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[12252-15791]:Block[12602-16141]"
    }, {
      "left" : "if ( tm != null && isSpringTransactionManager(tm.getClass()))",
      "right" : "if ( tm != null && isSpringTransactionManager(tm.getClass()))",
      "info" : "IfStatement[12266-15591]:IfStatement[12616-15941]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[12329-14422]:Block[12679-14772]"
    }, {
      "left" : "try{...}",
      "right" : "try{...}",
      "info" : "TryStatement[12347-14408]:TryStatement[12697-14758]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[12351-13018]:Block[12701-13368]"
    }, {
      "left" : "logger.debug( \"Instantiating KieSpringTransactionManager\" );",
      "right" : "logger.debug( \"Instantiating KieSpringTransactionManager\" );",
      "info" : "ExpressionStatement[12373-12433]:ExpressionStatement[12723-12783]"
    }, {
      "left" : "Class< ? > cls = Class.forName( \"org.kie.spring.persistence.KieSpringTransactionManager\" );",
      "right" : "Class< ? > cls = Class.forName( \"org.kie.spring.persistence.KieSpringTransactionManager\" );",
      "info" : "VariableDeclarationStatement[12454-12545]:VariableDeclarationStatement[12804-12895]"
    }, {
      "left" : "Constructor< ? > con = cls.getConstructors()[0];",
      "right" : "Constructor< ? > con = cls.getConstructors()[0];",
      "info" : "VariableDeclarationStatement[12566-12614]:VariableDeclarationStatement[12916-12964]"
    }, {
      "left" : "this.txm = (TransactionManager) con.newInstance( tm );",
      "right" : "this.txm = (TransactionManager) con.newInstance( tm );",
      "info" : "ExpressionStatement[12635-12689]:ExpressionStatement[12985-13039]"
    }, {
      "left" : "env.set( EnvironmentName.TRANSACTION_MANAGER, this.txm );",
      "right" : "env.set( EnvironmentName.TRANSACTION_MANAGER, this.txm );",
      "info" : "ExpressionStatement[12710-12767]:ExpressionStatement[13060-13117]"
    }, {
      "left" : "cls = Class.forName( \"org.kie.spring.persistence.KieSpringJpaManager\" );",
      "right" : "cls = Class.forName( \"org.kie.spring.persistence.KieSpringJpaManager\" );",
      "info" : "ExpressionStatement[12788-12860]:ExpressionStatement[13138-13210]"
    }, {
      "left" : "con = cls.getConstructors()[0];",
      "right" : "con = cls.getConstructors()[0];",
      "info" : "ExpressionStatement[12881-12912]:ExpressionStatement[13231-13262]"
    }, {
      "left" : "this.jpm = (PersistenceContextManager) con.newInstance( this.env );",
      "right" : "this.jpm = (PersistenceContextManager) con.newInstance( this.env );",
      "info" : "ExpressionStatement[12933-13000]:ExpressionStatement[13283-13350]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[13041-14408]:Block[13391-14758]"
    }, {
      "left" : "logger.warn( \"Could not instantiate KieSpringTransactionManager. Trying with DroolsSpringTransactionManager.\" );",
      "right" : "logger.warn( \"Could not instantiate KieSpringTransactionManager. Trying with DroolsSpringTransactionManager.\" );",
      "info" : "ExpressionStatement[13128-13240]:ExpressionStatement[13478-13590]"
    }, {
      "left" : "try{...}",
      "right" : "try{...}",
      "info" : "TryStatement[13261-14390]:TryStatement[13611-14740]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[13265-14091]:Block[13615-14441]"
    }, {
      "left" : "logger.debug( \"Instantiating DroolsSpringTransactionManager\" );",
      "right" : "logger.debug( \"Instantiating DroolsSpringTransactionManager\" );",
      "info" : "ExpressionStatement[13291-13354]:ExpressionStatement[13641-13704]"
    }, {
      "left" : "Class< ? > cls = Class.forName( \"org.drools.container.spring.beans.persistence.DroolsSpringTransactionManager\" );",
      "right" : "Class< ? > cls = Class.forName( \"org.drools.container.spring.beans.persistence.DroolsSpringTransactionManager\" );",
      "info" : "VariableDeclarationStatement[13379-13492]:VariableDeclarationStatement[13729-13842]"
    }, {
      "left" : "Constructor< ? > con = cls.getConstructors()[0];",
      "right" : "Constructor< ? > con = cls.getConstructors()[0];",
      "info" : "VariableDeclarationStatement[13517-13565]:VariableDeclarationStatement[13867-13915]"
    }, {
      "left" : "this.txm = (TransactionManager) con.newInstance( tm );",
      "right" : "this.txm = (TransactionManager) con.newInstance( tm );",
      "info" : "ExpressionStatement[13590-13644]:ExpressionStatement[13940-13994]"
    }, {
      "left" : "env.set( EnvironmentName.TRANSACTION_MANAGER, this.txm );",
      "right" : "env.set( EnvironmentName.TRANSACTION_MANAGER, this.txm );",
      "info" : "ExpressionStatement[13669-13726]:ExpressionStatement[14019-14076]"
    }, {
      "left" : "cls = Class.forName( \"org.drools.container.spring.beans.persistence.DroolsSpringJpaManager\" );",
      "right" : "cls = Class.forName( \"org.drools.container.spring.beans.persistence.DroolsSpringJpaManager\" );",
      "info" : "ExpressionStatement[13827-13921]:ExpressionStatement[14177-14271]"
    }, {
      "left" : "con = cls.getConstructors()[0];",
      "right" : "con = cls.getConstructors()[0];",
      "info" : "ExpressionStatement[13946-13977]:ExpressionStatement[14296-14327]"
    }, {
      "left" : "this.jpm = (PersistenceContextManager) con.newInstance( this.env );",
      "right" : "this.jpm = (PersistenceContextManager) con.newInstance( this.env );",
      "info" : "ExpressionStatement[14002-14069]:ExpressionStatement[14352-14419]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[14115-14390]:Block[14465-14740]"
    }, {
      "left" : "logger.warn( \"Could not instantiate DroolsSpringTransactionManager\" );",
      "right" : "logger.warn( \"Could not instantiate DroolsSpringTransactionManager\" );",
      "info" : "ExpressionStatement[14141-14211]:ExpressionStatement[14491-14561]"
    }, {
      "left" : "throw new RuntimeException( \"Could not instantiate org.kie.container.spring.beans.persistence.DroolsSpringTransactionManager\", ex );",
      "right" : "throw new RuntimeException( \"Could not instantiate org.kie.container.spring.beans.persistence.DroolsSpringTransactionManager\", ex );",
      "info" : "ThrowStatement[14236-14368]:ThrowStatement[14586-14718]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[14428-15591]:Block[14778-15941]"
    }, {
      "left" : "logger.debug( \"Instantiating JtaTransactionManager\" );",
      "right" : "logger.debug( \"Instantiating JtaTransactionManager\" );",
      "info" : "ExpressionStatement[14446-14500]:ExpressionStatement[14796-14850]"
    }, {
      "left" : "this.txm = new JtaTransactionManager( env.get( EnvironmentName.TRANSACTION ),\n                                                      env.get( EnvironmentName.TRANSACTION_SYNCHRONIZATION_REGISTRY ),\n                                                      tm );",
      "right" : "this.txm = new JtaTransactionManager( env.get( EnvironmentName.TRANSACTION ),\n                                                      env.get( EnvironmentName.TRANSACTION_SYNCHRONIZATION_REGISTRY ),\n                                                      tm );",
      "info" : "ExpressionStatement[14517-14773]:ExpressionStatement[14867-15123]"
    }, {
      "left" : "env.set( EnvironmentName.TRANSACTION_MANAGER, this.txm );",
      "right" : "env.set( EnvironmentName.TRANSACTION_MANAGER, this.txm );",
      "info" : "ExpressionStatement[14790-14847]:ExpressionStatement[15140-15197]"
    }, {
      "left" : "try{...}",
      "right" : "try{...}",
      "info" : "TryStatement[14864-15577]:TryStatement[15214-15927]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[14868-15248]:Block[15218-15598]"
    }, {
      "left" : "Class< ? > jpaPersistenceCtxMngrClass = Class.forName( \"org.jbpm.persistence.JpaProcessPersistenceContextManager\" );",
      "right" : "Class< ? > jpaPersistenceCtxMngrClass = Class.forName( \"org.jbpm.persistence.JpaProcessPersistenceContextManager\" );",
      "info" : "VariableDeclarationStatement[14890-15006]:VariableDeclarationStatement[15240-15356]"
    }, {
      "left" : "Constructor< ? > jpaPersistenceCtxMngrCtor = jpaPersistenceCtxMngrClass.getConstructors()[0];",
      "right" : "Constructor< ? > jpaPersistenceCtxMngrCtor = jpaPersistenceCtxMngrClass.getConstructors()[0];",
      "info" : "VariableDeclarationStatement[15027-15120]:VariableDeclarationStatement[15377-15470]"
    }, {
      "left" : "this.jpm = (PersistenceContextManager) jpaPersistenceCtxMngrCtor.newInstance( this.env );",
      "right" : "this.jpm = (PersistenceContextManager) jpaPersistenceCtxMngrCtor.newInstance( this.env );",
      "info" : "ExpressionStatement[15141-15230]:ExpressionStatement[15491-15580]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[15284-15380]:Block[15634-15730]"
    }, {
      "left" : "this.jpm = new JpaPersistenceContextManager( this.env );",
      "right" : "this.jpm = new JpaPersistenceContextManager( this.env );",
      "info" : "ExpressionStatement[15306-15362]:ExpressionStatement[15656-15712]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[15403-15577]:Block[15753-15927]"
    }, {
      "left" : "throw new RuntimeException( \"Error creating JpaProcessPersistenceContextManager\",\n                                                e );",
      "right" : "throw new RuntimeException( \"Error creating JpaProcessPersistenceContextManager\",\n                                                e );",
      "info" : "ThrowStatement[15425-15559]:ThrowStatement[15775-15909]"
    }, {
      "left" : "env.set( EnvironmentName.PERSISTENCE_CONTEXT_MANAGER,\n                     this.jpm );",
      "right" : "env.set( EnvironmentName.PERSISTENCE_CONTEXT_MANAGER,\n                     this.jpm );",
      "info" : "ExpressionStatement[15604-15690]:ExpressionStatement[15954-16040]"
    }, {
      "left" : "env.set( EnvironmentName.TRANSACTION_MANAGER,\n                     this.txm );",
      "right" : "env.set( EnvironmentName.TRANSACTION_MANAGER,\n                     this.txm );",
      "info" : "ExpressionStatement[15703-15781]:ExpressionStatement[16053-16131]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[15930-15936]:Modifier[16280-16286]"
    }, {
      "left" : "static",
      "right" : "static",
      "info" : "Modifier[15937-15943]:Modifier[16287-16293]"
    }, {
      "left" : "boolean",
      "right" : "boolean",
      "info" : "PrimitiveType[15944-15951]:PrimitiveType[16294-16301]"
    }, {
      "left" : "isSpringTransactionManager",
      "right" : "isSpringTransactionManager",
      "info" : "SimpleName[15952-15978]:SimpleName[16302-16328]"
    }, {
      "left" : "Class<?> clazz",
      "right" : "Class<?> clazz",
      "info" : "SingleVariableDeclaration[15980-15994]:SingleVariableDeclaration[16330-16344]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[15997-16297]:Block[16347-16647]"
    }, {
      "left" : "if ( SPRING_TM_CLASSNAME.equals(clazz.getName()))",
      "right" : "if ( SPRING_TM_CLASSNAME.equals(clazz.getName()))",
      "info" : "IfStatement[16007-16094]:IfStatement[16357-16444]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[16058-16094]:Block[16408-16444]"
    }, {
      "left" : "return true;",
      "right" : "return true;",
      "info" : "ReturnStatement[16072-16084]:ReturnStatement[16422-16434]"
    }, {
      "left" : "if (clazz.getSuperclass() != null)",
      "right" : "if (clazz.getSuperclass() != null)",
      "info" : "IfStatement[16145-16269]:IfStatement[16495-16619]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[16188-16269]:Block[16538-16619]"
    }, {
      "left" : "return isSpringTransactionManager(clazz.getSuperclass());",
      "right" : "return isSpringTransactionManager(clazz.getSuperclass());",
      "info" : "ReturnStatement[16202-16259]:ReturnStatement[16552-16609]"
    }, {
      "left" : "return false;",
      "right" : "return false;",
      "info" : "ReturnStatement[16278-16291]:ReturnStatement[16628-16641]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[16303-16309]:Modifier[16653-16659]"
    }, {
      "left" : "static",
      "right" : "static",
      "info" : "Modifier[16310-16316]:Modifier[16660-16666]"
    }, {
      "left" : "class",
      "right" : "class",
      "info" : "TYPE_DECLARATION_KIND[16317-16322]:TYPE_DECLARATION_KIND[16667-16672]"
    }, {
      "left" : "EndOperationListenerImpl",
      "right" : "EndOperationListenerImpl",
      "info" : "SimpleName[16323-16347]:SimpleName[16673-16697]"
    }, {
      "left" : "EndOperationListener",
      "right" : "EndOperationListener",
      "info" : "SimpleType[16375-16395]:SimpleType[16725-16745]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[16481-16487]:Modifier[16831-16837]"
    }, {
      "left" : "EndOperationListenerImpl",
      "right" : "EndOperationListenerImpl",
      "info" : "SimpleName[16488-16512]:SimpleName[16838-16862]"
    }, {
      "left" : "TransactionManager txm",
      "right" : "TransactionManager txm",
      "info" : "SingleVariableDeclaration[16513-16535]:SingleVariableDeclaration[16863-16885]"
    }, {
      "left" : "SessionInfo info",
      "right" : "SessionInfo info",
      "info" : "SingleVariableDeclaration[16537-16553]:SingleVariableDeclaration[16887-16903]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[16555-16624]:Block[16905-16974]"
    }, {
      "left" : "this.info = info;",
      "right" : "this.info = info;",
      "info" : "ExpressionStatement[16569-16586]:ExpressionStatement[16919-16936]"
    }, {
      "left" : "this.txm = txm;",
      "right" : "this.txm = txm;",
      "info" : "ExpressionStatement[16599-16614]:ExpressionStatement[16949-16964]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[16634-16640]:Modifier[16984-16990]"
    }, {
      "left" : "void",
      "right" : "void",
      "info" : "PrimitiveType[16641-16645]:PrimitiveType[16991-16995]"
    }, {
      "left" : "endOperation",
      "right" : "endOperation",
      "info" : "SimpleName[16646-16658]:SimpleName[16996-17008]"
    }, {
      "left" : "InternalKnowledgeRuntime kruntime",
      "right" : "InternalKnowledgeRuntime kruntime",
      "info" : "SingleVariableDeclaration[16659-16692]:SingleVariableDeclaration[17009-17042]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[16694-16866]:Block[17044-17216]"
    }, {
      "left" : "this.info.setLastModificationDate( new Date( kruntime.getLastIdleTimestamp() ) );",
      "right" : "this.info.setLastModificationDate( new Date( kruntime.getLastIdleTimestamp() ) );",
      "info" : "ExpressionStatement[16708-16789]:ExpressionStatement[17058-17139]"
    }, {
      "left" : "TransactionManagerHelper.addToUpdatableSet(txm, info);",
      "right" : "TransactionManagerHelper.addToUpdatableSet(txm, info);",
      "info" : "ExpressionStatement[16802-16856]:ExpressionStatement[17152-17206]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[16878-16884]:Modifier[17228-17234]"
    }, {
      "left" : "Context",
      "right" : "Context",
      "info" : "SimpleType[16885-16892]:SimpleType[17235-17242]"
    }, {
      "left" : "getContext",
      "right" : "getContext",
      "info" : "SimpleName[16893-16903]:SimpleName[17243-17253]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[16906-16943]:Block[17256-17293]"
    }, {
      "left" : "return this.kContext;",
      "right" : "return this.kContext;",
      "info" : "ReturnStatement[16916-16937]:ReturnStatement[17266-17287]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[16949-16955]:Modifier[17390-17396]"
    }, {
      "left" : "synchronized",
      "right" : "synchronized",
      "info" : "Modifier[16956-16968]:Modifier[17397-17409]"
    }, {
      "left" : "T",
      "right" : "T",
      "info" : "TypeParameter[16970-16971]:TypeParameter[17411-17412]"
    }, {
      "left" : "T",
      "right" : "T",
      "info" : "SimpleType[16973-16974]:SimpleType[17414-17415]"
    }, {
      "left" : "execute",
      "right" : "execute",
      "info" : "SimpleName[16975-16982]:SimpleName[17416-17423]"
    }, {
      "left" : "Command<T> command",
      "right" : "Command<T> command",
      "info" : "SingleVariableDeclaration[16983-17001]:SingleVariableDeclaration[17424-17442]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[17003-17058]:Block[17444-17499]"
    }, {
      "left" : "return commandService.execute(command);",
      "right" : "return commandService.execute(command);",
      "info" : "ReturnStatement[17013-17052]:ReturnStatement[17454-17493]"
    }, {
      "left" : "private",
      "right" : "private",
      "info" : "Modifier[17064-17071]:Modifier[17505-17512]"
    }, {
      "left" : "void",
      "right" : "void",
      "info" : "PrimitiveType[17072-17076]:PrimitiveType[17513-17517]"
    }, {
      "left" : "rollbackTransaction",
      "right" : "rollbackTransaction",
      "info" : "SimpleName[17077-17096]:SimpleName[17518-17537]"
    }, {
      "left" : "Exception t1",
      "right" : "Exception t1",
      "info" : "SingleVariableDeclaration[17097-17109]:SingleVariableDeclaration[17538-17550]"
    }, {
      "left" : "boolean transactionOwner",
      "right" : "boolean transactionOwner",
      "info" : "SingleVariableDeclaration[17148-17172]:SingleVariableDeclaration[17589-17613]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[17174-17577]:Block[17615-18018]"
    }, {
      "left" : "try{...}",
      "right" : "try{...}",
      "info" : "TryStatement[17184-17571]:TryStatement[17625-18012]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[17188-17330]:Block[17629-17771]"
    }, {
      "left" : "logger.warn( \"Could not commit session\",\n                          t1 );",
      "right" : "logger.warn( \"Could not commit session\",\n                          t1 );",
      "info" : "ExpressionStatement[17202-17274]:ExpressionStatement[17643-17715]"
    }, {
      "left" : "txm.rollback( transactionOwner );",
      "right" : "txm.rollback( transactionOwner );",
      "info" : "ExpressionStatement[17287-17320]:ExpressionStatement[17728-17761]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[17354-17571]:Block[17795-18012]"
    }, {
      "left" : "logger.error( \"Could not rollback\",\n                          t2 );",
      "right" : "logger.error( \"Could not rollback\",\n                          t2 );",
      "info" : "ExpressionStatement[17368-17435]:ExpressionStatement[17809-17876]"
    }, {
      "left" : "throw new RuntimeException( \"Could not commit session or rollback\",\n                                        t2 );",
      "right" : "throw new RuntimeException( \"Could not commit session or rollback\",\n                                        t2 );",
      "info" : "ThrowStatement[17448-17561]:ThrowStatement[17889-18002]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[17583-17589]:Modifier[18024-18030]"
    }, {
      "left" : "void",
      "right" : "void",
      "info" : "PrimitiveType[17590-17594]:PrimitiveType[18031-18035]"
    }, {
      "left" : "dispose",
      "right" : "dispose",
      "info" : "SimpleName[17595-17602]:SimpleName[18036-18043]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[17605-17688]:Block[18046-18164]"
    }, {
      "left" : "if ( ksession != null)",
      "right" : "if ( ksession != null)",
      "info" : "IfStatement[17615-17682]:IfStatement[18056-18123]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[17639-17682]:Block[18080-18123]"
    }, {
      "left" : "ksession.dispose();",
      "right" : "ksession.dispose();",
      "info" : "ExpressionStatement[17653-17672]:ExpressionStatement[18094-18113]"
    }, {
      "left" : "@Override",
      "right" : "@Override",
      "info" : "MarkerAnnotation[17694-17703]:MarkerAnnotation[18170-18179]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[17708-17714]:Modifier[18184-18190]"
    }, {
      "left" : "void",
      "right" : "void",
      "info" : "PrimitiveType[17715-17719]:PrimitiveType[18191-18195]"
    }, {
      "left" : "destroy",
      "right" : "destroy",
      "info" : "SimpleName[17720-17727]:SimpleName[18196-18203]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[17730-18634]:Block[18206-19110]"
    }, {
      "left" : "PersistenceContext persistenceContext = this.jpm.getApplicationScopedPersistenceContext();",
      "right" : "PersistenceContext persistenceContext = this.jpm.getApplicationScopedPersistenceContext();",
      "info" : "VariableDeclarationStatement[17740-17830]:VariableDeclarationStatement[18216-18306]"
    }, {
      "left" : "boolean transactionOwner = false;",
      "right" : "boolean transactionOwner = false;",
      "info" : "VariableDeclarationStatement[17840-17873]:VariableDeclarationStatement[18316-18349]"
    }, {
      "left" : "try{...}",
      "right" : "try{...}",
      "info" : "TryStatement[17882-18628]:TryStatement[18358-19104]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[17886-18340]:Block[18362-18816]"
    }, {
      "left" : "transactionOwner = txm.begin();",
      "right" : "transactionOwner = txm.begin();",
      "info" : "ExpressionStatement[17900-17931]:ExpressionStatement[18376-18407]"
    }, {
      "left" : "persistenceContext.joinTransaction();",
      "right" : "persistenceContext.joinTransaction();",
      "info" : "ExpressionStatement[17957-17994]:ExpressionStatement[18433-18470]"
    }, {
      "left" : "initExistingKnowledgeSession( this.sessionInfo.getId(),\n                    this.marshallingHelper.getKbase(),\n                    this.marshallingHelper.getConf(),\n                    persistenceContext );",
      "right" : "initExistingKnowledgeSession( this.sessionInfo.getId(),\n                    this.marshallingHelper.getKbase(),\n                    this.marshallingHelper.getConf(),\n                    persistenceContext );",
      "info" : "ExpressionStatement[18020-18226]:ExpressionStatement[18496-18702]"
    }, {
      "left" : "persistenceContext.remove(this.sessionInfo);",
      "right" : "persistenceContext.remove(this.sessionInfo);",
      "info" : "ExpressionStatement[18240-18284]:ExpressionStatement[18716-18760]"
    }, {
      "left" : "txm.commit( transactionOwner );",
      "right" : "txm.commit( transactionOwner );",
      "info" : "ExpressionStatement[18298-18329]:ExpressionStatement[18774-18805]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[18371-18461]:Block[18847-18937]"
    }, {
      "left" : "rollbackTransaction( re, transactionOwner );",
      "right" : "rollbackTransaction( re, transactionOwner );",
      "info" : "ExpressionStatement[18385-18429]:ExpressionStatement[18861-18905]"
    }, {
      "left" : "throw re;",
      "right" : "throw re;",
      "info" : "ThrowStatement[18442-18451]:ThrowStatement[18918-18927]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[18485-18628]:Block[18961-19104]"
    }, {
      "left" : "rollbackTransaction(t1, transactionOwner);",
      "right" : "rollbackTransaction(t1, transactionOwner);",
      "info" : "ExpressionStatement[18499-18541]:ExpressionStatement[18975-19017]"
    }, {
      "left" : "throw new RuntimeException( \"Wrapped exception see cause\", t1 );",
      "right" : "throw new RuntimeException( \"Wrapped exception see cause\", t1 );",
      "info" : "ThrowStatement[18554-18618]:ThrowStatement[19030-19094]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[18640-18646]:Modifier[19116-19122]"
    }, {
      "left" : "Long",
      "right" : "Long",
      "info" : "SimpleType[18647-18651]:SimpleType[19123-19127]"
    }, {
      "left" : "getSessionId",
      "right" : "getSessionId",
      "info" : "SimpleName[18652-18664]:SimpleName[19128-19140]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[18667-18710]:Block[19143-19186]"
    }, {
      "left" : "return sessionInfo.getId();",
      "right" : "return sessionInfo.getId();",
      "info" : "ReturnStatement[18677-18704]:ReturnStatement[19153-19180]"
    }, {
      "left" : "private",
      "right" : "private",
      "info" : "Modifier[18716-18723]:Modifier[19192-19199]"
    }, {
      "left" : "void",
      "right" : "void",
      "info" : "PrimitiveType[18724-18728]:PrimitiveType[19200-19204]"
    }, {
      "left" : "registerRollbackSync",
      "right" : "registerRollbackSync",
      "info" : "SimpleName[18729-18749]:SimpleName[19205-19225]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[18752-18871]:Block[19228-19347]"
    }, {
      "left" : "TransactionManagerHelper.registerTransactionSyncInContainer(this.txm, new SynchronizationImpl( this ));",
      "right" : "TransactionManagerHelper.registerTransactionSyncInContainer(this.txm, new SynchronizationImpl( this ));",
      "info" : "ExpressionStatement[18762-18865]:ExpressionStatement[19238-19341]"
    }, {
      "left" : "private",
      "right" : "private",
      "info" : "Modifier[18877-18884]:Modifier[19353-19360]"
    }, {
      "left" : "static",
      "right" : "static",
      "info" : "Modifier[18885-18891]:Modifier[19361-19367]"
    }, {
      "left" : "class",
      "right" : "class",
      "info" : "TYPE_DECLARATION_KIND[18892-18897]:TYPE_DECLARATION_KIND[19368-19373]"
    }, {
      "left" : "SynchronizationImpl",
      "right" : "SynchronizationImpl",
      "info" : "SimpleName[18898-18917]:SimpleName[19374-19393]"
    }, {
      "left" : "OrderedTransactionSynchronization",
      "right" : "OrderedTransactionSynchronization",
      "info" : "SimpleType[18942-18975]:SimpleType[19418-19451]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[19033-19039]:Modifier[19509-19515]"
    }, {
      "left" : "SynchronizationImpl",
      "right" : "SynchronizationImpl",
      "info" : "SimpleName[19040-19059]:SimpleName[19516-19535]"
    }, {
      "left" : "SingleSessionCommandService service",
      "right" : "SingleSessionCommandService service",
      "info" : "SingleVariableDeclaration[19060-19095]:SingleVariableDeclaration[19536-19571]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[19097-19209]:Block[19573-19685]"
    }, {
      "left" : "super(1, \"SynchronizationImpl-\"+service.toString());",
      "right" : "super(1, \"SynchronizationImpl-\"+service.toString());",
      "info" : "SuperConstructorInvocation[19111-19163]:SuperConstructorInvocation[19587-19639]"
    }, {
      "left" : "this.service = service;",
      "right" : "this.service = service;",
      "info" : "ExpressionStatement[19176-19199]:ExpressionStatement[19652-19675]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[19219-19225]:Modifier[19695-19701]"
    }, {
      "left" : "void",
      "right" : "void",
      "info" : "PrimitiveType[19226-19230]:PrimitiveType[19702-19706]"
    }, {
      "left" : "afterCompletion",
      "right" : "afterCompletion",
      "info" : "SimpleName[19231-19246]:SimpleName[19707-19722]"
    }, {
      "left" : "int status",
      "right" : "int status",
      "info" : "SingleVariableDeclaration[19247-19257]:SingleVariableDeclaration[19723-19733]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[19259-20605]:Block[19735-21081]"
    }, {
      "left" : "if ( status != TransactionManager.STATUS_COMMITTED)",
      "right" : "if ( status != TransactionManager.STATUS_COMMITTED)",
      "info" : "IfStatement[19273-19382]:IfStatement[19749-19858]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[19326-19382]:Block[19802-19858]"
    }, {
      "left" : "this.service.rollback();",
      "right" : "this.service.rollback();",
      "info" : "ExpressionStatement[19344-19368]:ExpressionStatement[19820-19844]"
    }, {
      "left" : "if (this.service.txm != null)",
      "right" : "if (this.service.txm != null)",
      "info" : "IfStatement[19397-19854]:IfStatement[19873-20330]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[19427-19854]:Block[19903-20330]"
    }, {
      "left" : "ObjectMarshallingStrategy[] strategies = (ObjectMarshallingStrategy[]) this.service.env.get(EnvironmentName.OBJECT_MARSHALLING_STRATEGIES);",
      "right" : "ObjectMarshallingStrategy[] strategies = (ObjectMarshallingStrategy[]) this.service.env.get(EnvironmentName.OBJECT_MARSHALLING_STRATEGIES);",
      "info" : "VariableDeclarationStatement[19445-19584]:VariableDeclarationStatement[19921-20060]"
    }, {
      "left" : "for (ObjectMarshallingStrategy strategy : strategies)",
      "right" : "for (ObjectMarshallingStrategy strategy : strategies)",
      "info" : "EnhancedForStatement[19602-19840]:EnhancedForStatement[20078-20316]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[19656-19840]:Block[20132-20316]"
    }, {
      "left" : "if (strategy instanceof TransactionAware)",
      "right" : "if (strategy instanceof TransactionAware)",
      "info" : "IfStatement[19678-19822]:IfStatement[20154-20298]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[19720-19822]:Block[20196-20298]"
    }, {
      "left" : "((TransactionAware) strategy).onEnd(this.service.txm);",
      "right" : "((TransactionAware) strategy).onEnd(this.service.txm);",
      "info" : "ExpressionStatement[19746-19800]:ExpressionStatement[20222-20276]"
    }, {
      "left" : "this.service.jpm.endCommandScopedEntityManager();",
      "right" : "this.service.jpm.endCommandScopedEntityManager();",
      "info" : "ExpressionStatement[19868-19917]:ExpressionStatement[20344-20393]"
    }, {
      "left" : "KieSession ksession = this.service.ksession;",
      "right" : "KieSession ksession = this.service.ksession;",
      "info" : "VariableDeclarationStatement[19931-19975]:VariableDeclarationStatement[20407-20451]"
    }, {
      "left" : "if ( ksession != null)",
      "right" : "if ( ksession != null)",
      "info" : "IfStatement[20051-20594]:IfStatement[20527-21070]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[20075-20594]:Block[20551-21070]"
    }, {
      "left" : "InternalProcessRuntime internalProcessRuntime = ((InternalKnowledgeRuntime) ksession).getProcessRuntime();",
      "right" : "InternalProcessRuntime internalProcessRuntime = ((InternalKnowledgeRuntime) ksession).getProcessRuntime();",
      "info" : "VariableDeclarationStatement[20093-20199]:VariableDeclarationStatement[20569-20675]"
    }, {
      "left" : "if ( internalProcessRuntime != null)",
      "right" : "if ( internalProcessRuntime != null)",
      "info" : "IfStatement[20216-20493]:IfStatement[20692-20969]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[20254-20493]:Block[20730-20969]"
    }, {
      "left" : "if (this.service.doRollback)",
      "right" : "if (this.service.doRollback)",
      "info" : "IfStatement[20276-20405]:IfStatement[20752-20881]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[20305-20405]:Block[20781-20881]"
    }, {
      "left" : "internalProcessRuntime.clearProcessInstancesState();",
      "right" : "internalProcessRuntime.clearProcessInstancesState();",
      "info" : "ExpressionStatement[20331-20383]:ExpressionStatement[20807-20859]"
    }, {
      "left" : "internalProcessRuntime.clearProcessInstances();",
      "right" : "internalProcessRuntime.clearProcessInstances();",
      "info" : "ExpressionStatement[20428-20475]:ExpressionStatement[20904-20951]"
    }, {
      "left" : "((JPAWorkItemManager) ksession.getWorkItemManager()).clearWorkItems();",
      "right" : "((JPAWorkItemManager) ksession.getWorkItemManager()).clearWorkItems();",
      "info" : "ExpressionStatement[20510-20580]:ExpressionStatement[20986-21056]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[20615-20621]:Modifier[21091-21097]"
    }, {
      "left" : "void",
      "right" : "void",
      "info" : "PrimitiveType[20622-20626]:PrimitiveType[21098-21102]"
    }, {
      "left" : "beforeCompletion",
      "right" : "beforeCompletion",
      "info" : "SimpleName[20627-20643]:SimpleName[21103-21119]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[20646-20681]:Block[21122-21157]"
    }, {
      "left" : "@Override",
      "right" : "@Override",
      "info" : "MarkerAnnotation[20691-20700]:MarkerAnnotation[21167-21176]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[20709-20715]:Modifier[21185-21191]"
    }, {
      "left" : "String",
      "right" : "String",
      "info" : "SimpleType[20716-20722]:SimpleType[21192-21198]"
    }, {
      "left" : "toString",
      "right" : "toString",
      "info" : "SimpleName[20723-20731]:SimpleName[21199-21207]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[20734-20901]:Block[21210-21377]"
    }, {
      "left" : "return \"SynchronizationImpl{\" +\n                    \"service=\" + service.sessionInfo +  \" cmd=\" + service.toString() +\n                    '}';",
      "right" : "return \"SynchronizationImpl{\" +\n                    \"service=\" + service.sessionInfo +  \" cmd=\" + service.toString() +\n                    '}';",
      "info" : "ReturnStatement[20748-20891]:ReturnStatement[21224-21367]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[20913-20919]:Modifier[21389-21395]"
    }, {
      "left" : "KieSession",
      "right" : "KieSession",
      "info" : "SimpleType[20920-20930]:SimpleType[21396-21406]"
    }, {
      "left" : "getKieSession",
      "right" : "getKieSession",
      "info" : "SimpleName[20931-20944]:SimpleName[21407-21420]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[20947-20984]:Block[21423-21460]"
    }, {
      "left" : "return this.ksession;",
      "right" : "return this.ksession;",
      "info" : "ReturnStatement[20957-20978]:ReturnStatement[21433-21454]"
    }, {
      "left" : "public",
      "right" : "protected",
      "info" : "Modifier[20990-20996]:Modifier[21574-21583]"
    }, {
      "left" : "void",
      "right" : "void",
      "info" : "PrimitiveType[20997-21001]:PrimitiveType[21584-21588]"
    }, {
      "left" : "addInterceptor",
      "right" : "addInterceptor",
      "info" : "SimpleName[21002-21016]:SimpleName[21589-21603]"
    }, {
      "left" : "Interceptor interceptor",
      "right" : "Interceptor interceptor",
      "info" : "SingleVariableDeclaration[21017-21040]:SingleVariableDeclaration[21604-21627]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[21042-21144]:Block[21644-21896]"
    }, {
      "left" : "interceptor.setNext( this.commandService );",
      "right" : "interceptor.setNext( this.commandService );",
      "info" : "ExpressionStatement[21052-21095]:ExpressionStatement[21654-21697]"
    }, {
      "left" : "this.commandService = interceptor;",
      "right" : "this.commandService = interceptor;",
      "info" : "ExpressionStatement[21104-21138]:ExpressionStatement[21706-21740]"
    }, {
      "left" : "private",
      "right" : "private",
      "info" : "Modifier[21150-21157]:Modifier[21902-21909]"
    }, {
      "left" : "void",
      "right" : "void",
      "info" : "PrimitiveType[21158-21162]:PrimitiveType[21910-21914]"
    }, {
      "left" : "rollback",
      "right" : "rollback",
      "info" : "SimpleName[21163-21171]:SimpleName[21915-21923]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[21174-21213]:Block[21926-21965]"
    }, {
      "left" : "this.doRollback = true;",
      "right" : "this.doRollback = true;",
      "info" : "ExpressionStatement[21184-21207]:ExpressionStatement[21936-21959]"
    }, {
      "left" : "private",
      "right" : "private",
      "info" : "Modifier[21219-21226]:Modifier[21971-21978]"
    }, {
      "left" : "void",
      "right" : "void",
      "info" : "PrimitiveType[21227-21231]:PrimitiveType[21979-21983]"
    }, {
      "left" : "registerUpdateSync",
      "right" : "registerUpdateSync",
      "info" : "SimpleName[21232-21250]:SimpleName[21984-22002]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[21253-21586]:Block[22005-22338]"
    }, {
      "left" : "if (this.txm.getResource(\"TriggerUpdateTransactionSynchronization-\"+this.toString()) == null)",
      "right" : "if (this.txm.getResource(\"TriggerUpdateTransactionSynchronization-\"+this.toString()) == null)",
      "info" : "IfStatement[21263-21580]:IfStatement[22015-22332]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[21357-21580]:Block[22109-22332]"
    }, {
      "left" : "this.txm.registerTransactionSynchronization(new TriggerUpdateTransactionSynchronization(txm, env));",
      "right" : "this.txm.registerTransactionSynchronization(new TriggerUpdateTransactionSynchronization(txm, env));",
      "info" : "ExpressionStatement[21371-21470]:ExpressionStatement[22123-22222]"
    }, {
      "left" : "this.txm.putResource(\"TriggerUpdateTransactionSynchronization-\"+this.toString(), true);",
      "right" : "this.txm.putResource(\"TriggerUpdateTransactionSynchronization-\"+this.toString(), true);",
      "info" : "ExpressionStatement[21483-21570]:ExpressionStatement[22235-22322]"
    }, {
      "left" : "private",
      "right" : "private",
      "info" : "Modifier[21592-21599]:Modifier[22344-22351]"
    }, {
      "left" : "class",
      "right" : "class",
      "info" : "TYPE_DECLARATION_KIND[21600-21605]:TYPE_DECLARATION_KIND[22352-22357]"
    }, {
      "left" : "TransactionInterceptor",
      "right" : "TransactionInterceptor",
      "info" : "SimpleName[21606-21628]:SimpleName[22358-22380]"
    }, {
      "left" : "AbstractInterceptor",
      "right" : "AbstractInterceptor",
      "info" : "SimpleType[21637-21656]:SimpleType[22389-22408]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[21668-21674]:Modifier[22420-22426]"
    }, {
      "left" : "TransactionInterceptor",
      "right" : "TransactionInterceptor",
      "info" : "SimpleName[21675-21697]:SimpleName[22427-22449]"
    }, {
      "left" : "Context context",
      "right" : "Context context",
      "info" : "SingleVariableDeclaration[21698-21713]:SingleVariableDeclaration[22450-22465]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[21715-21783]:Block[22467-22535]"
    }, {
      "left" : "setNext(new DefaultCommandService(context));",
      "right" : "setNext(new DefaultCommandService(context));",
      "info" : "ExpressionStatement[21729-21773]:ExpressionStatement[22481-22525]"
    }, {
      "left" : "@Override",
      "right" : "@Override",
      "info" : "MarkerAnnotation[21793-21802]:MarkerAnnotation[22545-22554]"
    }, {
      "left" : "public",
      "right" : "public",
      "info" : "Modifier[21811-21817]:Modifier[22563-22569]"
    }, {
      "left" : "T",
      "right" : "T",
      "info" : "TypeParameter[21819-21820]:TypeParameter[22571-22572]"
    }, {
      "left" : "T",
      "right" : "T",
      "info" : "SimpleType[21822-21823]:SimpleType[22574-22575]"
    }, {
      "left" : "execute",
      "right" : "execute",
      "info" : "SimpleName[21824-21831]:SimpleName[22576-22583]"
    }, {
      "left" : "Command<T> command",
      "right" : "Command<T> command",
      "info" : "SingleVariableDeclaration[21832-21850]:SingleVariableDeclaration[22584-22602]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[21852-24408]:Block[22604-25160]"
    }, {
      "left" : "if (command instanceof UnpersistableCommand)",
      "right" : "if (command instanceof UnpersistableCommand)",
      "info" : "IfStatement[21866-22050]:IfStatement[22618-22802]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[21911-22050]:Block[22663-22802]"
    }, {
      "left" : "throw new UnsupportedOperationException(\"Command \" + command + \" cannot be issued on a persisted session\");",
      "right" : "throw new UnsupportedOperationException(\"Command \" + command + \" cannot be issued on a persisted session\");",
      "info" : "ThrowStatement[21929-22036]:ThrowStatement[22681-22788]"
    }, {
      "left" : "if (command instanceof DisposeCommand)",
      "right" : "if (command instanceof DisposeCommand)",
      "info" : "IfStatement[22064-22231]:IfStatement[22816-22983]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[22103-22231]:Block[22855-22983]"
    }, {
      "left" : "T result = executeNext( command );",
      "right" : "T result = executeNext( command );",
      "info" : "VariableDeclarationStatement[22121-22155]:VariableDeclarationStatement[22873-22907]"
    }, {
      "left" : "jpm.dispose();",
      "right" : "jpm.dispose();",
      "info" : "ExpressionStatement[22172-22186]:ExpressionStatement[22924-22938]"
    }, {
      "left" : "return result;",
      "right" : "return result;",
      "info" : "ReturnStatement[22203-22217]:ReturnStatement[22955-22969]"
    }, {
      "left" : "PersistenceContext persistenceContext = jpm.getApplicationScopedPersistenceContext();",
      "right" : "PersistenceContext persistenceContext = jpm.getApplicationScopedPersistenceContext();",
      "info" : "VariableDeclarationStatement[22315-22400]:VariableDeclarationStatement[23067-23152]"
    }, {
      "left" : "boolean transactionOwner = false;",
      "right" : "boolean transactionOwner = false;",
      "info" : "VariableDeclarationStatement[22414-22447]:VariableDeclarationStatement[23166-23199]"
    }, {
      "left" : "try{...}",
      "right" : "try{...}",
      "info" : "TryStatement[22460-24398]:TryStatement[23212-25150]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[22464-24012]:Block[23216-24764]"
    }, {
      "left" : "transactionOwner = txm.begin();",
      "right" : "transactionOwner = txm.begin();",
      "info" : "ExpressionStatement[22482-22513]:ExpressionStatement[23234-23265]"
    }, {
      "left" : "persistenceContext.joinTransaction();",
      "right" : "persistenceContext.joinTransaction();",
      "info" : "ExpressionStatement[22547-22584]:ExpressionStatement[23299-23336]"
    }, {
      "left" : "initExistingKnowledgeSession( sessionInfo.getId(),\n                        marshallingHelper.getKbase(),\n                        marshallingHelper.getConf(),\n                        persistenceContext );",
      "right" : "initExistingKnowledgeSession( sessionInfo.getId(),\n                        marshallingHelper.getKbase(),\n                        marshallingHelper.getConf(),\n                        persistenceContext );",
      "info" : "ExpressionStatement[22618-22821]:ExpressionStatement[23370-23573]"
    }, {
      "left" : "jpm.beginCommandScopedEntityManager();",
      "right" : "jpm.beginCommandScopedEntityManager();",
      "info" : "ExpressionStatement[22839-22877]:ExpressionStatement[23591-23629]"
    }, {
      "left" : "registerRollbackSync();",
      "right" : "registerRollbackSync();",
      "info" : "ExpressionStatement[22895-22918]:ExpressionStatement[23647-23670]"
    }, {
      "left" : "if (txm != null)",
      "right" : "if (txm != null)",
      "info" : "IfStatement[22936-23384]:IfStatement[23688-24136]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[22953-23384]:Block[23705-24136]"
    }, {
      "left" : "ObjectMarshallingStrategy[] strategies = (ObjectMarshallingStrategy[]) env.get(EnvironmentName.OBJECT_MARSHALLING_STRATEGIES);",
      "right" : "ObjectMarshallingStrategy[] strategies = (ObjectMarshallingStrategy[]) env.get(EnvironmentName.OBJECT_MARSHALLING_STRATEGIES);",
      "info" : "VariableDeclarationStatement[22975-23101]:VariableDeclarationStatement[23727-23853]"
    }, {
      "left" : "for (ObjectMarshallingStrategy strategy : strategies)",
      "right" : "for (ObjectMarshallingStrategy strategy : strategies)",
      "info" : "EnhancedForStatement[23123-23366]:EnhancedForStatement[23875-24118]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[23177-23366]:Block[23929-24118]"
    }, {
      "left" : "if (strategy instanceof TransactionAware)",
      "right" : "if (strategy instanceof TransactionAware)",
      "info" : "IfStatement[23203-23344]:IfStatement[23955-24096]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[23245-23344]:Block[23997-24096]"
    }, {
      "left" : "((TransactionAware) strategy).onStart(txm);",
      "right" : "((TransactionAware) strategy).onStart(txm);",
      "info" : "ExpressionStatement[23275-23318]:ExpressionStatement[24027-24070]"
    }, {
      "left" : "T result = null;",
      "right" : "T result = null;",
      "info" : "VariableDeclarationStatement[23402-23418]:VariableDeclarationStatement[24154-24170]"
    }, {
      "left" : "if( command instanceof BatchExecutionCommand)",
      "right" : "if( command instanceof BatchExecutionCommand)",
      "info" : "IfStatement[23435-23879]:IfStatement[24187-24631]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[23481-23702]:Block[24233-24454]"
    }, {
      "left" : "result = ksession.execute(command);",
      "right" : "result = ksession.execute(command);",
      "info" : "ExpressionStatement[23649-23684]:ExpressionStatement[24401-24436]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[23724-23879]:Block[24476-24631]"
    }, {
      "left" : "logger.trace(\"Executing \" + command.getClass().getSimpleName());",
      "right" : "logger.trace(\"Executing \" + command.getClass().getSimpleName());",
      "info" : "ExpressionStatement[23746-23810]:ExpressionStatement[24498-24562]"
    }, {
      "left" : "result = executeNext(command);",
      "right" : "result = executeNext(command);",
      "info" : "ExpressionStatement[23831-23861]:ExpressionStatement[24583-24613]"
    }, {
      "left" : "registerUpdateSync();",
      "right" : "registerUpdateSync();",
      "info" : "ExpressionStatement[23896-23917]:ExpressionStatement[24648-24669]"
    }, {
      "left" : "txm.commit( transactionOwner );",
      "right" : "txm.commit( transactionOwner );",
      "info" : "ExpressionStatement[23934-23965]:ExpressionStatement[24686-24717]"
    }, {
      "left" : "return result;",
      "right" : "return result;",
      "info" : "ReturnStatement[23983-23997]:ReturnStatement[24735-24749]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[24043-24169]:Block[24795-24921]"
    }, {
      "left" : "rollbackTransaction( re,\n                        transactionOwner );",
      "right" : "rollbackTransaction( re,\n                        transactionOwner );",
      "info" : "ExpressionStatement[24061-24129]:ExpressionStatement[24813-24881]"
    }, {
      "left" : "throw re;",
      "right" : "throw re;",
      "info" : "ThrowStatement[24146-24155]:ThrowStatement[24898-24907]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[24193-24398]:Block[24945-25150]"
    }, {
      "left" : "rollbackTransaction( t1,\n                        transactionOwner );",
      "right" : "rollbackTransaction( t1,\n                        transactionOwner );",
      "info" : "ExpressionStatement[24211-24279]:ExpressionStatement[24963-25031]"
    }, {
      "left" : "throw new RuntimeException( \"Wrapped exception see cause\",\n                        t1 );",
      "right" : "throw new RuntimeException( \"Wrapped exception see cause\",\n                        t1 );",
      "info" : "ThrowStatement[24296-24384]:ThrowStatement[25048-25136]"
    } ]
  },
  "interFileMappings" : { }
}