{
  "intraFileMappings" : {
    "matchedElements" : [
 {
      "left" : "private static final String LINE_SEPARATOR = System.getProperty(\"line.separator\");",
      "right" : "private static final String LINE_SEPARATOR = System.getProperty(\"line.separator\");",
      "info" : "FieldDeclaration[3540-3622]:FieldDeclaration[3568-3650]"
    }, {
      "left" : "private volatile String temporaryFileSuffix =\".writing\";",
      "right" : "private volatile String temporaryFileSuffix = \".writing\";",
      "info" : "FieldDeclaration[3625-3681]:FieldDeclaration[3653-3710]"
    }, {
      "left" : "private volatile boolean temporaryFileSuffixSet = false;",
      "right" : "private volatile boolean temporaryFileSuffixSet = false;",
      "info" : "FieldDeclaration[3684-3740]:FieldDeclaration[3713-3769]"
    }, {
      "left" : "private volatile FileExistsMode fileExistsMode  = FileExistsMode.REPLACE;",
      "right" : "private volatile FileExistsMode fileExistsMode = FileExistsMode.REPLACE;",
      "info" : "FieldDeclaration[3743-3816]:FieldDeclaration[3772-3844]"
    }, {
      "left" : "private final Log logger = LogFactory.getLog(this.getClass());",
      "right" : "private final Log logger = LogFactory.getLog(this.getClass());",
      "info" : "FieldDeclaration[3819-3881]:FieldDeclaration[3847-3909]"
    }, {
      "left" : "private volatile FileNameGenerator fileNameGenerator = new DefaultFileNameGenerator();",
      "right" : "private volatile FileNameGenerator fileNameGenerator = new DefaultFileNameGenerator();",
      "info" : "FieldDeclaration[3884-3970]:FieldDeclaration[3912-3998]"
    }, {
      "left" : "private volatile boolean fileNameGeneratorSet;",
      "right" : "private volatile boolean fileNameGeneratorSet;",
      "info" : "FieldDeclaration[3973-4019]:FieldDeclaration[4001-4047]"
    }, {
      "left" : "private volatile StandardEvaluationContext evaluationContext;",
      "right" : "private volatile StandardEvaluationContext evaluationContext;",
      "info" : "FieldDeclaration[4022-4083]:FieldDeclaration[4050-4111]"
    }, {
      "left" : "private final Expression destinationDirectoryExpression;",
      "right" : "private final Expression destinationDirectoryExpression;",
      "info" : "FieldDeclaration[4086-4142]:FieldDeclaration[4114-4170]"
    }, {
      "left" : "private volatile boolean autoCreateDirectory = true;",
      "right" : "private volatile boolean autoCreateDirectory = true;",
      "info" : "FieldDeclaration[4145-4197]:FieldDeclaration[4173-4225]"
    }, {
      "left" : "private volatile boolean deleteSourceFiles;",
      "right" : "private volatile boolean deleteSourceFiles;",
      "info" : "FieldDeclaration[4200-4243]:FieldDeclaration[4228-4271]"
    }, {
      "left" : "private volatile Charset charset = Charset.defaultCharset();",
      "right" : "private volatile Charset charset = Charset.defaultCharset();",
      "info" : "FieldDeclaration[4246-4306]:FieldDeclaration[4274-4334]"
    }, {
      "left" : "private volatile boolean expectReply = true;",
      "right" : "private volatile boolean expectReply = true;",
      "info" : "FieldDeclaration[4309-4353]:FieldDeclaration[4337-4381]"
    }, {
      "left" : "private volatile boolean appendNewLine = false;",
      "right" : "private volatile boolean appendNewLine = false;",
      "info" : "FieldDeclaration[4356-4403]:FieldDeclaration[4384-4431]"
    }, {
      "left" : "private volatile LockRegistry lockRegistry = new PassThruLockRegistry();",
      "right" : "private volatile LockRegistry lockRegistry = new PassThruLockRegistry();",
      "info" : "FieldDeclaration[4406-4478]:FieldDeclaration[4434-4506]"
    }, {
      "left" : "public FileWritingMessageHandler(File destinationDirectory)",
      "right" : "public FileWritingMessageHandler(File destinationDirectory)",
      "info" : "MethodDeclaration[4481-4944]:MethodDeclaration[4509-4972]"
    }, {
      "left" : "public FileWritingMessageHandler(Expression destinationDirectoryExpression)",
      "right" : "public FileWritingMessageHandler(Expression destinationDirectoryExpression)",
      "info" : "MethodDeclaration[4947-5390]:MethodDeclaration[4975-5418]"
    }, {
      "left" : "public void setAutoCreateDirectory(boolean autoCreateDirectory)",
      "right" : "public void setAutoCreateDirectory(boolean autoCreateDirectory)",
      "info" : "MethodDeclaration[5393-5889]:MethodDeclaration[5421-5917]"
    }, {
      "left" : "public void setTemporaryFileSuffix(String temporaryFileSuffix)",
      "right" : "public void setTemporaryFileSuffix(String temporaryFileSuffix)",
      "info" : "MethodDeclaration[5892-6437]:MethodDeclaration[5920-6465]"
    }, {
      "left" : "public void setExpectReply(boolean expectReply)",
      "right" : "public void setExpectReply(boolean expectReply)",
      "info" : "MethodDeclaration[7463-7813]:MethodDeclaration[7500-7850]"
    }, {
      "left" : "public void setAppendNewLine(boolean appendNewLine)",
      "right" : "public void setAppendNewLine(boolean appendNewLine)",
      "info" : "MethodDeclaration[7816-8117]:MethodDeclaration[7853-8158]"
    }, {
      "left" : "protected String getTemporaryFileSuffix()",
      "right" : "protected String getTemporaryFileSuffix()",
      "info" : "MethodDeclaration[8120-8196]:MethodDeclaration[8161-8237]"
    }, {
      "left" : "public void setFileNameGenerator(FileNameGenerator fileNameGenerator)",
      "right" : "public void setFileNameGenerator(FileNameGenerator fileNameGenerator)",
      "info" : "MethodDeclaration[8199-8605]:MethodDeclaration[8240-8646]"
    }, {
      "left" : "public void setDeleteSourceFiles(boolean deleteSourceFiles)",
      "right" : "public void setDeleteSourceFiles(boolean deleteSourceFiles)",
      "info" : "MethodDeclaration[8608-9160]:MethodDeclaration[8649-9201]"
    }, {
      "left" : "public void setCharset(String charset)",
      "right" : "public void setCharset(String charset)",
      "info" : "MethodDeclaration[9163-9537]:MethodDeclaration[9204-9578]"
    }, {
      "left" : "protected void doInit()",
      "right" : "protected void doInit()",
      "info" : "MethodDeclaration[9540-10141]:MethodDeclaration[9581-10182]"
    }, {
      "left" : "private void validateDestinationDirectory(File destinationDirectory, boolean autoCreateDirectory)",
      "right" : "private void validateDestinationDirectory(File destinationDirectory, boolean autoCreateDirectory)",
      "info" : "MethodDeclaration[10144-11022]:MethodDeclaration[10185-11064]"
    }, {
      "left" : "private File retrieveOriginalFileFromHeader(Message<?> message)",
      "right" : "private File retrieveOriginalFileFromHeader(Message<?> message)",
      "info" : "MethodDeclaration[13193-13707]:MethodDeclaration[13403-13917]"
    }, {
      "left" : "private File handleByteArrayMessage(final byte[] bytes, File originalFile, File tempFile, final File resultFile) throws IOException",
      "right" : "private File handleByteArrayMessage(final byte[] bytes, File originalFile, File tempFile, final File resultFile)\n\t\t\tthrows IOException",
      "info" : "MethodDeclaration[16001-16962]:MethodDeclaration[16491-17461]"
    }, {
      "left" : "protected void whileLocked() throws IOException",
      "right" : "protected void whileLocked() throws IOException",
      "info" : "MethodDeclaration[16518-16826]:MethodDeclaration[17017-17325]"
    }, {
      "left" : "private File handleStringMessage(final String content, File originalFile, File tempFile, final File resultFile) throws IOException",
      "right" : "private File handleStringMessage(final String content, File originalFile, File tempFile, final File resultFile)\n\t\t\tthrows IOException",
      "info" : "MethodDeclaration[16965-17944]:MethodDeclaration[17464-18456]"
    }, {
      "left" : "protected void whileLocked() throws IOException",
      "right" : "protected void whileLocked() throws IOException",
      "info" : "MethodDeclaration[17510-17807]:MethodDeclaration[18022-18319]"
    }, {
      "left" : "private File determineFileToWrite(File resultFile, File tempFile",
      "right" : "private File determineFileToWrite(File resultFile, File tempFile)",
      "info" : "MethodDeclaration[17947-18361]:MethodDeclaration[18459-18875]"
    }, {
      "left" : "private void cleanUpAfterCopy(File fileToWriteTo, File resultFile, File originalFile) throws IOExceptio",
      "right" : "private void cleanUpAfterCopy(File fileToWriteTo, File resultFile, File originalFile) throws IOException",
      "info" : "MethodDeclaration[18364-18717]:MethodDeclaration[18878-19232]"
    }, {
      "left" : "private void renameTo(File tempFile, File resultFile) throws IOExceptio",
      "right" : "private void renameTo(File tempFile, File resultFile) throws IOException",
      "info" : "MethodDeclaration[18720-19622]:MethodDeclaration[19235-20158]"
    }, {
      "left" : "private File evaluateDestinationDirectoryExpression(Message<?> message)",
      "right" : "private File evaluateDestinationDirectoryExpression(Message<?> message)",
      "info" : "MethodDeclaration[19625-21003]:MethodDeclaration[20161-21543]"
    } ],
    "mappings" : [
 {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[4762-4944]:Block[4790-4972]"
    }, {
      "left" : "Assert.notNull(destinationDirectory, \"Destination directory must not be null.\");",
      "right" : "Assert.notNull(destinationDirectory, \"Destination directory must not be null.\");",
      "info" : "ExpressionStatement[4766-4846]:ExpressionStatement[4794-4874]"
    }, {
      "left" : "this.destinationDirectoryExpression = new LiteralExpression(destinationDirectory.getPath());",
      "right" : "this.destinationDirectoryExpression = new LiteralExpression(destinationDirectory.getPath());",
      "info" : "ExpressionStatement[4849-4941]:ExpressionStatement[4877-4969]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[5210-5390]:Block[5238-5418]"
    }, {
      "left" : "Assert.notNull(destinationDirectoryExpression, \"Destination directory expression must not be null.\");",
      "right" : "Assert.notNull(destinationDirectoryExpression, \"Destination directory expression must not be null.\");",
      "info" : "ExpressionStatement[5214-5315]:ExpressionStatement[5242-5343]"
    }, {
      "left" : "this.destinationDirectoryExpression = destinationDirectoryExpression;",
      "right" : "this.destinationDirectoryExpression = destinationDirectoryExpression;",
      "info" : "ExpressionStatement[5318-5387]:ExpressionStatement[5346-5415]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[5835-5889]:Block[5863-5917]"
    }, {
      "left" : "this.autoCreateDirectory = autoCreateDirectory;",
      "right" : "this.autoCreateDirectory = autoCreateDirectory;",
      "info" : "ExpressionStatement[5839-5886]:ExpressionStatement[5867-5914]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[6242-6437]:Block[6270-6465]"
    }, {
      "left" : "Assert.notNull(temporaryFileSuffix, \"'temporaryFileSuffix' must not be null\");",
      "right" : "Assert.notNull(temporaryFileSuffix, \"'temporaryFileSuffix' must not be null\");",
      "info" : "ExpressionStatement[6246-6324]:ExpressionStatement[6274-6352]"
    }, {
      "left" : "this.temporaryFileSuffix = temporaryFileSuffix;",
      "right" : "this.temporaryFileSuffix = temporaryFileSuffix;",
      "info" : "ExpressionStatement[6349-6396]:ExpressionStatement[6377-6424]"
    }, {
      "left" : "this.temporaryFileSuffixSet = true;",
      "right" : "this.temporaryFileSuffixSet = true;",
      "info" : "ExpressionStatement[6399-6434]:ExpressionStatement[6427-6462]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[7775-7813]:Block[7812-7850]"
    }, {
      "left" : "this.expectReply = expectReply;",
      "right" : "this.expectReply = expectReply;",
      "info" : "ExpressionStatement[7779-7810]:ExpressionStatement[7816-7847]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[8075-8117]:Block[8116-8158]"
    }, {
      "left" : "this.appendNewLine = appendNewLine;",
      "right" : "this.appendNewLine = appendNewLine;",
      "info" : "ExpressionStatement[8079-8114]:ExpressionStatement[8120-8155]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[8162-8196]:Block[8203-8237]"
    }, {
      "left" : "return temporaryFileSuffix;",
      "right" : "return temporaryFileSuffix;",
      "info" : "ReturnStatement[8166-8193]:ReturnStatement[8207-8234]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[8444-8605]:Block[8485-8646]"
    }, {
      "left" : "Assert.notNull(fileNameGenerator, \"FileNameGenerator must not be null\");",
      "right" : "Assert.notNull(fileNameGenerator, \"FileNameGenerator must not be null\");",
      "info" : "ExpressionStatement[8448-8520]:ExpressionStatement[8489-8561]"
    }, {
      "left" : "this.fileNameGenerator = fileNameGenerator;",
      "right" : "this.fileNameGenerator = fileNameGenerator;",
      "info" : "ExpressionStatement[8523-8566]:ExpressionStatement[8564-8607]"
    }, {
      "left" : "this.fileNameGeneratorSet = true;",
      "right" : "this.fileNameGeneratorSet = true;",
      "info" : "ExpressionStatement[8569-8602]:ExpressionStatement[8610-8643]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[9110-9160]:Block[9151-9201]"
    }, {
      "left" : "this.deleteSourceFiles = deleteSourceFiles;",
      "right" : "this.deleteSourceFiles = deleteSourceFiles;",
      "info" : "ExpressionStatement[9114-9157]:ExpressionStatement[9155-9198]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[9341-9537]:Block[9382-9578]"
    }, {
      "left" : "Assert.notNull(charset, \"charset must not be null\");",
      "right" : "Assert.notNull(charset, \"charset must not be null\");",
      "info" : "ExpressionStatement[9345-9397]:ExpressionStatement[9386-9438]"
    }, {
      "left" : "Assert.isTrue(Charset.isSupported(charset), \"Charset '\" + charset + \"' is not supported.\");",
      "right" : "Assert.isTrue(Charset.isSupported(charset), \"Charset '\" + charset + \"' is not supported.\");",
      "info" : "ExpressionStatement[9400-9491]:ExpressionStatement[9441-9532]"
    }, {
      "left" : "this.charset = Charset.forName(charset);",
      "right" : "this.charset = Charset.forName(charset);",
      "info" : "ExpressionStatement[9494-9534]:ExpressionStatement[9535-9575]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[9575-10141]:Block[9616-10182]"
    }, {
      "left" : "this.evaluationContext = ExpressionUtils.createStandardEvaluationContext(this.getBeanFactory());",
      "right" : "this.evaluationContext = ExpressionUtils.createStandardEvaluationContext(this.getBeanFactory());",
      "info" : "ExpressionStatement[9580-9676]:ExpressionStatement[9621-9717]"
    }, {
      "left" : "if (this.destinationDirectoryExpression instanceof LiteralExpression)",
      "right" : "if (this.destinationDirectoryExpression instanceof LiteralExpression)",
      "info" : "IfStatement[9680-9957]:IfStatement[9721-9998]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[9750-9957]:Block[9791-9998]"
    }, {
      "left" : "final File directory = new File(this.destinationDirectoryExpression.getValue(\n\t\t\t\t\tthis.evaluationContext, null, String.class));",
      "right" : "final File directory = new File(this.destinationDirectoryExpression.getValue(\n\t\t\t\t\tthis.evaluationContext, null, String.class));",
      "info" : "VariableDeclarationStatement[9755-9883]:VariableDeclarationStatement[9796-9924]"
    }, {
      "left" : "validateDestinationDirectory(directory, this.autoCreateDirectory);",
      "right" : "validateDestinationDirectory(directory, this.autoCreateDirectory);",
      "info" : "ExpressionStatement[9887-9953]:ExpressionStatement[9928-9994]"
    }, {
      "left" : "if (!this.fileNameGeneratorSet && this.fileNameGenerator instanceof BeanFactoryAware)",
      "right" : "if (!this.fileNameGeneratorSet && this.fileNameGenerator instanceof BeanFactoryAware)",
      "info" : "IfStatement[9961-10138]:IfStatement[10002-10179]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[10047-10138]:Block[10088-10179]"
    }, {
      "left" : "((BeanFactoryAware) this.fileNameGenerator).setBeanFactory(this.getBeanFactory());",
      "right" : "((BeanFactoryAware) this.fileNameGenerator).setBeanFactory(this.getBeanFactory());",
      "info" : "ExpressionStatement[10052-10134]:ExpressionStatement[10093-10175]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[10242-11022]:Block[10283-11064]"
    }, {
      "left" : "if (!destinationDirectory.exists() && autoCreateDirectory)",
      "right" : "if (!destinationDirectory.exists() && autoCreateDirectory)",
      "info" : "IfStatement[10247-10442]:IfStatement[10288-10484]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[10306-10442]:Block[10347-10484]"
    }, {
      "left" : "Assert.isTrue(destinationDirectory.mkdirs(),\n\t\t\t\t\"Destination directory [\" + destinationDirectory + \"] could not be created.\");",
      "right" : "Assert.isTrue(destinationDirectory.mkdirs(),\n\t\t\t\t\t\"Destination directory [\" + destinationDirectory + \"] could not be created.\");",
      "info" : "ExpressionStatement[10311-10438]:ExpressionStatement[10352-10480]"
    }, {
      "left" : "Assert.isTrue(destinationDirectory.exists(),\n\t\t\t\t\"Destination directory [\" + destinationDirectory + \"] does not exist.\");",
      "right" : "Assert.isTrue(destinationDirectory.exists(),\n\t\t\t\t\"Destination directory [\" + destinationDirectory + \"] does not exist.\");",
      "info" : "ExpressionStatement[10446-10567]:ExpressionStatement[10488-10609]"
    }, {
      "left" : "Assert.isTrue(destinationDirectory.isDirectory(),\n\t\t\t\t\"Destination path [\" + destinationDirectory + \"] does not point to a directory.\");",
      "right" : "Assert.isTrue(destinationDirectory.isDirectory(),\n\t\t\t\t\"Destination path [\" + destinationDirectory + \"] does not point to a directory.\");",
      "info" : "ExpressionStatement[10570-10706]:ExpressionStatement[10612-10748]"
    }, {
      "left" : "Assert.isTrue(destinationDirectory.canWrite(),\n\t\t\t\t\"Destination directory [\" + destinationDirectory + \"] is not writable.\");",
      "right" : "Assert.isTrue(destinationDirectory.canWrite(),\n\t\t\t\t\"Destination directory [\" + destinationDirectory + \"] is not writable.\");",
      "info" : "ExpressionStatement[10709-10833]:ExpressionStatement[10751-10875]"
    }, {
      "left" : "Assert.state(!(this.temporaryFileSuffixSet\n\t\t\t\t\t\t&& FileExistsMode.APPEND.equals(this.fileExistsMode)),\n\t\t\t\t\"'temporaryFileSuffix' can not be set when appending to an existing file\");",
      "right" : "Assert.state(!(this.temporaryFileSuffixSet\n\t\t\t\t\t\t&& FileExistsMode.APPEND.equals(this.fileExistsMode)),\n\t\t\t\t\"'temporaryFileSuffix' can not be set when appending to an existing file\");",
      "info" : "ExpressionStatement[10836-11019]:ExpressionStatement[10878-11061]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[13486-13707]:Block[13696-13917]"
    }, {
      "left" : "Object value = message.getHeaders().get(FileHeaders.ORIGINAL_FILE);",
      "right" : "Object value = message.getHeaders().get(FileHeaders.ORIGINAL_FILE);",
      "info" : "VariableDeclarationStatement[13490-13557]:VariableDeclarationStatement[13700-13767]"
    }, {
      "left" : "if (value instanceof File)",
      "right" : "if (value instanceof File)",
      "info" : "IfStatement[13560-13616]:IfStatement[13770-13826]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[13587-13616]:Block[13797-13826]"
    }, {
      "left" : "return (File) value;",
      "right" : "return (File) value;",
      "info" : "ReturnStatement[13592-13612]:ReturnStatement[13802-13822]"
    }, {
      "left" : "if (value instanceof String)",
      "right" : "if (value instanceof String)",
      "info" : "IfStatement[13619-13689]:IfStatement[13829-13899]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[13648-13689]:Block[13858-13899]"
    }, {
      "left" : "return new File((String) value);",
      "right" : "return new File((String) value);",
      "info" : "ReturnStatement[13653-13685]:ReturnStatement[13863-13895]"
    }, {
      "left" : "return null;",
      "right" : "return null;",
      "info" : "ReturnStatement[13692-13704]:ReturnStatement[13902-13914]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[16133-16962]:Block[16626-17461]"
    }, {
      "left" : "File fileToWriteTo = this.determineFileToWrite(resultFile, tempFile);",
      "right" : "File fileToWriteTo = this.determineFileToWrite(resultFile, tempFile);",
      "info" : "VariableDeclarationStatement[16137-16206]:VariableDeclarationStatement[16630-16699]"
    }, {
      "left" : "final boolean append = FileExistsMode.APPEND.equals(this.fileExistsMode);",
      "right" : "final boolean append = FileExistsMode.APPEND.equals(this.fileExistsMode);",
      "info" : "VariableDeclarationStatement[16210-16283]:VariableDeclarationStatement[16703-16776]"
    }, {
      "left" : "final BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(fileToWriteTo, append));",
      "right" : "final BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(fileToWriteTo, append));",
      "info" : "VariableDeclarationStatement[16287-16390]:VariableDeclarationStatement[16780-16883]"
    }, {
      "left" : "WhileLockedProcessor whileLockedProcessor = new WhileLockedProcessor(this.lockRegistry, fileToWriteTo.getAbsolutePath()){\n\t\t\t@Override\n\t\t\tprotected void whileLocked() throws IOException {\n\t\t\t\ttry {\n\t\t\t\t\tbos.write(bytes);\n\t\t\t\t\tif (FileWritingMessageHandler.this.appendNewLine) {\n\t\t\t\t\t\tbos.write(LINE_SEPARATOR.getBytes());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfinally {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tbos.close();\n\t\t\t\t\t}\n\t\t\t\t\tcatch (IOException ex) {\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t};",
      "right" : "WhileLockedProcessor whileLockedProcessor = new WhileLockedProcessor(this.lockRegistry,\n\t\t\t\tfileToWriteTo.getAbsolutePath()) {\n\n\t\t\t@Override\n\t\t\tprotected void whileLocked() throws IOException {\n\t\t\t\ttry {\n\t\t\t\t\tbos.write(bytes);\n\t\t\t\t\tif (FileWritingMessageHandler.this.appendNewLine) {\n\t\t\t\t\t\tbos.write(LINE_SEPARATOR.getBytes());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfinally {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tbos.close();\n\t\t\t\t\t}\n\t\t\t\t\tcatch (IOException ex) {\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t};",
      "info" : "VariableDeclarationStatement[16393-16832]:VariableDeclarationStatement[16886-17331]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[16579-16826]:Block[17078-17325]"
    }, {
      "left" : "try{...}",
      "right" : "try{...}",
      "info" : "TryStatement[16585-16821]:TryStatement[17084-17320]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[16589-16727]:Block[17088-17226]"
    }, {
      "left" : "bos.write(bytes);",
      "right" : "bos.write(bytes);",
      "info" : "ExpressionStatement[16596-16613]:ExpressionStatement[17095-17112]"
    }, {
      "left" : "if (FileWritingMessageHandler.this.appendNewLine)",
      "right" : "if (FileWritingMessageHandler.this.appendNewLine)",
      "info" : "IfStatement[16619-16721]:IfStatement[17118-17220]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[16669-16721]:Block[17168-17220]"
    }, {
      "left" : "bos.write(LINE_SEPARATOR.getBytes());",
      "right" : "bos.write(LINE_SEPARATOR.getBytes());",
      "info" : "ExpressionStatement[16677-16714]:ExpressionStatement[17176-17213]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[16740-16821]:Block[17239-17320]"
    }, {
      "left" : "try{...}",
      "right" : "try{...}",
      "info" : "TryStatement[16747-16815]:TryStatement[17246-17314]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[16751-16778]:Block[17250-17277]"
    }, {
      "left" : "bos.close();",
      "right" : "bos.close();",
      "info" : "ExpressionStatement[16759-16771]:ExpressionStatement[17258-17270]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[16807-16815]:Block[17306-17314]"
    }, {
      "left" : "whileLockedProcessor.doWhileLocked();",
      "right" : "whileLockedProcessor.doWhileLocked();",
      "info" : "ExpressionStatement[16835-16872]:ExpressionStatement[17334-17371]"
    }, {
      "left" : "this.cleanUpAfterCopy(fileToWriteTo, resultFile, originalFile);",
      "right" : "this.cleanUpAfterCopy(fileToWriteTo, resultFile, originalFile);",
      "info" : "ExpressionStatement[16875-16938]:ExpressionStatement[17374-17437]"
    }, {
      "left" : "return resultFile;",
      "right" : "return resultFile;",
      "info" : "ReturnStatement[16941-16959]:ReturnStatement[17440-17458]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[17096-17944]:Block[17598-18456]"
    }, {
      "left" : "File fileToWriteTo = this.determineFileToWrite(resultFile, tempFile);",
      "right" : "File fileToWriteTo = this.determineFileToWrite(resultFile, tempFile);",
      "info" : "VariableDeclarationStatement[17100-17169]:VariableDeclarationStatement[17602-17671]"
    }, {
      "left" : "final boolean append = FileExistsMode.APPEND.equals(this.fileExistsMode);",
      "right" : "final boolean append = FileExistsMode.APPEND.equals(this.fileExistsMode);",
      "info" : "VariableDeclarationStatement[17173-17246]:VariableDeclarationStatement[17675-17748]"
    }, {
      "left" : "final BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(fileToWriteTo, append), this.charset));",
      "right" : "final BufferedWriter writer =\n\t\t\t\tnew BufferedWriter(new OutputStreamWriter(new FileOutputStream(fileToWriteTo, append), this.charset));",
      "info" : "VariableDeclarationStatement[17250-17382]:VariableDeclarationStatement[17752-17888]"
    }, {
      "left" : "WhileLockedProcessor whileLockedProcessor = new WhileLockedProcessor(this.lockRegistry, fileToWriteTo.getAbsolutePath()){\n\t\t\t@Override\n\t\t\tprotected void whileLocked() throws IOException {\n\t\t\t\ttry {\n\t\t\t\t\twriter.write(content);\n\t\t\t\t\tif (FileWritingMessageHandler.this.appendNewLine) {\n\t\t\t\t\t\twriter.newLine();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfinally {\n\t\t\t\t\ttry {\n\t\t\t\t\t\twriter.close();\n\t\t\t\t\t}\n\t\t\t\t\tcatch (IOException ex) {\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};",
      "right" : "WhileLockedProcessor whileLockedProcessor = new WhileLockedProcessor(this.lockRegistry,\n\t\t\t\tfileToWriteTo.getAbsolutePath()) {\n\n\t\t\t@Override\n\t\t\tprotected void whileLocked() throws IOException {\n\t\t\t\ttry {\n\t\t\t\t\twriter.write(content);\n\t\t\t\t\tif (FileWritingMessageHandler.this.appendNewLine) {\n\t\t\t\t\t\twriter.newLine();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfinally {\n\t\t\t\t\ttry {\n\t\t\t\t\t\twriter.close();\n\t\t\t\t\t}\n\t\t\t\t\tcatch (IOException ex) {\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};",
      "info" : "VariableDeclarationStatement[17385-17813]:VariableDeclarationStatement[17891-18325]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[17571-17807]:Block[18083-18319]"
    }, {
      "left" : "try{...}",
      "right" : "try{...}",
      "info" : "TryStatement[17577-17801]:TryStatement[18089-18313]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[17581-17704]:Block[18093-18216]"
    }, {
      "left" : "writer.write(content);",
      "right" : "writer.write(content);",
      "info" : "ExpressionStatement[17588-17610]:ExpressionStatement[18100-18122]"
    }, {
      "left" : "if (FileWritingMessageHandler.this.appendNewLine)",
      "right" : "if (FileWritingMessageHandler.this.appendNewLine)",
      "info" : "IfStatement[17616-17698]:IfStatement[18128-18210]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[17666-17698]:Block[18178-18210]"
    }, {
      "left" : "writer.newLine();",
      "right" : "writer.newLine();",
      "info" : "ExpressionStatement[17674-17691]:ExpressionStatement[18186-18203]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[17717-17801]:Block[18229-18313]"
    }, {
      "left" : "try{...}",
      "right" : "try{...}",
      "info" : "TryStatement[17724-17795]:TryStatement[18236-18307]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[17728-17758]:Block[18240-18270]"
    }, {
      "left" : "writer.close();",
      "right" : "writer.close();",
      "info" : "ExpressionStatement[17736-17751]:ExpressionStatement[18248-18263]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[17787-17795]:Block[18299-18307]"
    }, {
      "left" : "whileLockedProcessor.doWhileLocked();",
      "right" : "whileLockedProcessor.doWhileLocked();",
      "info" : "ExpressionStatement[17816-17853]:ExpressionStatement[18328-18365]"
    }, {
      "left" : "this.cleanUpAfterCopy(fileToWriteTo, resultFile, originalFile);",
      "right" : "this.cleanUpAfterCopy(fileToWriteTo, resultFile, originalFile);",
      "info" : "ExpressionStatement[17857-17920]:ExpressionStatement[18369-18432]"
    }, {
      "left" : "return resultFile;",
      "right" : "return resultFile;",
      "info" : "ReturnStatement[17923-17941]:ReturnStatement[18435-18453]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[18012-18361]:Block[18525-18875]"
    }, {
      "left" : "final File fileToWriteTo;",
      "right" : "final File fileToWriteTo;",
      "info" : "VariableDeclarationStatement[18017-18042]:VariableDeclarationStatement[18530-18555]"
    }, {
      "left" : "switch (this.fileExistsMode) {\n\t\t\tcase APPEND:\n\t\t\t\tfileToWriteTo = resultFile;\n\t\t\t\tbreak;\n\t\t\tcase FAIL:\n\t\t\tcase IGNORE:\n\t\t\tcase REPLACE:\n\t\t\t\tfileToWriteTo = tempFile;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new IllegalStateException(\"Unsupported FileExistsMode \"\n\t\t\t\t\t+ this.fileExistsMode);\n\t\t}",
      "right" : "switch (this.fileExistsMode) {\n\t\t\tcase APPEND:\n\t\t\t\tfileToWriteTo = resultFile;\n\t\t\t\tbreak;\n\t\t\tcase FAIL:\n\t\t\tcase IGNORE:\n\t\t\tcase REPLACE:\n\t\t\t\tfileToWriteTo = tempFile;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new IllegalStateException(\"Unsupported FileExistsMode \"\n\t\t\t\t\t\t+ this.fileExistsMode);\n\t\t}",
      "info" : "SwitchStatement[18046-18334]:SwitchStatement[18559-18848]"
    }, {
      "left" : "case APPEND:",
      "right" : "case APPEND:",
      "info" : "SwitchCase[18080-18092]:SwitchCase[18593-18605]"
    }, {
      "left" : "fileToWriteTo = resultFile;",
      "right" : "fileToWriteTo = resultFile;",
      "info" : "ExpressionStatement[18097-18124]:ExpressionStatement[18610-18637]"
    }, {
      "left" : "break;",
      "right" : "break;",
      "info" : "BreakStatement[18129-18135]:BreakStatement[18642-18648]"
    }, {
      "left" : "case FAIL:",
      "right" : "case FAIL:",
      "info" : "SwitchCase[18139-18149]:SwitchCase[18652-18662]"
    }, {
      "left" : "case IGNORE:",
      "right" : "case IGNORE:",
      "info" : "SwitchCase[18153-18165]:SwitchCase[18666-18678]"
    }, {
      "left" : "case REPLACE:",
      "right" : "case REPLACE:",
      "info" : "SwitchCase[18169-18182]:SwitchCase[18682-18695]"
    }, {
      "left" : "fileToWriteTo = tempFile;",
      "right" : "fileToWriteTo = tempFile;",
      "info" : "ExpressionStatement[18187-18212]:ExpressionStatement[18700-18725]"
    }, {
      "left" : "break;",
      "right" : "break;",
      "info" : "BreakStatement[18217-18223]:BreakStatement[18730-18736]"
    }, {
      "left" : "default:",
      "right" : "default:",
      "info" : "SwitchCase[18227-18235]:SwitchCase[18740-18748]"
    }, {
      "left" : "throw new IllegalStateException(\"Unsupported FileExistsMode \"\n\t\t\t\t\t+ this.fileExistsMode);",
      "right" : "throw new IllegalStateException(\"Unsupported FileExistsMode \"\n\t\t\t\t\t\t+ this.fileExistsMode);",
      "info" : "ThrowStatement[18240-18330]:ThrowStatement[18753-18844]"
    }, {
      "left" : "return fileToWriteTo;",
      "right" : "return fileToWriteTo;",
      "info" : "ReturnStatement[18337-18358]:ReturnStatement[18851-18872]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[18468-18717]:Block[18983-19232]"
    }, {
      "left" : "if (!FileExistsMode.APPEND.equals(this.fileExistsMode) && StringUtils.hasText(this.temporaryFileSuffix))",
      "right" : "if (!FileExistsMode.APPEND.equals(this.fileExistsMode) && StringUtils.hasText(this.temporaryFileSuffix))",
      "info" : "IfStatement[18472-18627]:IfStatement[18987-19142]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[18577-18627]:Block[19092-19142]"
    }, {
      "left" : "this.renameTo(fileToWriteTo, resultFile);",
      "right" : "this.renameTo(fileToWriteTo, resultFile);",
      "info" : "ExpressionStatement[18582-18623]:ExpressionStatement[19097-19138]"
    }, {
      "left" : "if (this.deleteSourceFiles && originalFile != null)",
      "right" : "if (this.deleteSourceFiles && originalFile != null)",
      "info" : "IfStatement[18631-18714]:IfStatement[19146-19229]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[18683-18714]:Block[19198-19229]"
    }, {
      "left" : "originalFile.delete();",
      "right" : "originalFile.delete();",
      "info" : "ExpressionStatement[18688-18710]:ExpressionStatement[19203-19225]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[18792-19622]:Block[19308-20158]"
    }, {
      "left" : "Assert.notNull(resultFile, \"'resultFile' must not be null\");",
      "right" : "Assert.notNull(resultFile, \"'resultFile' must not be null\");",
      "info" : "ExpressionStatement[18796-18856]:ExpressionStatement[19312-19372]"
    }, {
      "left" : "Assert.notNull(tempFile, \"'tempFile' must not be null\");",
      "right" : "Assert.notNull(tempFile, \"'tempFile' must not be null\");",
      "info" : "ExpressionStatement[18859-18915]:ExpressionStatement[19375-19431]"
    }, {
      "left" : "if (resultFile.exists())",
      "right" : "if (resultFile.exists())",
      "info" : "IfStatement[18919-19619]:IfStatement[19435-20155]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[18944-19429]:Block[19460-19959]"
    }, {
      "left" : "if (resultFile.setWritable(true, false) && resultFile.delete())",
      "right" : "if (resultFile.setWritable(true, false) && resultFile.delete())",
      "info" : "IfStatement[18949-19425]:IfStatement[19465-19955]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[19012-19198]:Block[19529-19722]"
    }, {
      "left" : "if (!tempFile.renameTo(resultFile))",
      "right" : "if (!tempFile.renameTo(resultFile))",
      "info" : "IfStatement[19018-19193]:IfStatement[19535-19717]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[19054-19193]:Block[19571-19717]"
    }, {
      "left" : "throw new IOException(\"Failed to rename file '\" + tempFile.getAbsolutePath() + \"' to '\" + resultFile.getAbsolutePath() + \"'\");",
      "right" : "throw new IOException(\"Failed to rename file '\" + tempFile.getAbsolutePath() +\n\t\t\t\t\t\t\t\"' to '\" + resultFile.getAbsolutePath() + \"'\");",
      "info" : "ThrowStatement[19061-19187]:ThrowStatement[19578-19711]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[19207-19425]:Block[19731-19955]"
    }, {
      "left" : "throw new IOException(\"Failed to rename file '\" + tempFile.getAbsolutePath() + \"' to '\" + resultFile.getAbsolutePath() +\n\t\t\t\t\t\t\"' since '\" + resultFile.getName() + \"' is not writable or can not be deleted\");",
      "right" : "throw new IOException(\"Failed to rename file '\" + tempFile.getAbsolutePath() +\n\t\t\t\t\t\t\"' to '\" + resultFile.getAbsolutePath() +\n\t\t\t\t\t\t\"' since '\" + resultFile.getName() + \"' is not writable or can not be deleted\");",
      "info" : "ThrowStatement[19213-19420]:ThrowStatement[19737-19950]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[19437-19619]:Block[19967-20155]"
    }, {
      "left" : "if (!tempFile.renameTo(resultFile))",
      "right" : "if (!tempFile.renameTo(resultFile))",
      "info" : "IfStatement[19442-19615]:IfStatement[19972-20151]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[19478-19615]:Block[20008-20151]"
    }, {
      "left" : "throw new IOException(\"Failed to rename file '\" + tempFile.getAbsolutePath() + \"' to '\" + resultFile.getAbsolutePath() + \"'\");",
      "right" : "throw new IOException(\"Failed to rename file '\" + tempFile.getAbsolutePath() +\n\t\t\t\t\t\t\"' to '\" + resultFile.getAbsolutePath() + \"'\");",
      "info" : "ThrowStatement[19484-19610]:ThrowStatement[20014-20146]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[19697-21003]:Block[20233-21543]"
    }, {
      "left" : "final File destinationDirectory;",
      "right" : "final File destinationDirectory;",
      "info" : "VariableDeclarationStatement[19702-19734]:VariableDeclarationStatement[20238-20270]"
    }, {
      "left" : "final Object destinationDirectoryToUse = this.destinationDirectoryExpression.getValue(\n\t\t\t\tthis.evaluationContext, message);",
      "right" : "final Object destinationDirectoryToUse = this.destinationDirectoryExpression.getValue(\n\t\t\t\tthis.evaluationContext, message);",
      "info" : "VariableDeclarationStatement[19738-19862]:VariableDeclarationStatement[20274-20398]"
    }, {
      "left" : "if (destinationDirectoryToUse == null)",
      "right" : "if (destinationDirectoryToUse == null)",
      "info" : "IfStatement[19866-20888]:IfStatement[20402-21428]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[19905-20113]:Block[20441-20651]"
    }, {
      "left" : "throw new IllegalStateException(String.format(\"The provided \" +\n\t\t\t\t\t\"destinationDirectoryExpression (%s) must not resolve to null.\",\n\t\t\t\t\tthis.destinationDirectoryExpression.getExpressionString()));",
      "right" : "throw new IllegalStateException(String.format(\"The provided \" +\n\t\t\t\t\t\t\t\"destinationDirectoryExpression (%s) must not resolve to null.\",\n\t\t\t\t\tthis.destinationDirectoryExpression.getExpressionString()));",
      "info" : "ThrowStatement[19910-20109]:ThrowStatement[20446-20647]"
    }, {
      "left" : "if (destinationDirectoryToUse instanceof String)",
      "right" : "if (destinationDirectoryToUse instanceof String)",
      "info" : "IfStatement[20121-20888]:IfStatement[20659-21428]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[20170-20530]:Block[20708-21068]"
    }, {
      "left" : "final String destinationDirectoryPath = (String) destinationDirectoryToUse;",
      "right" : "final String destinationDirectoryPath = (String) destinationDirectoryToUse;",
      "info" : "VariableDeclarationStatement[20176-20251]:VariableDeclarationStatement[20714-20789]"
    }, {
      "left" : "Assert.hasText(destinationDirectoryPath, String.format(\n\t\t\t\t\t\"Unable to resolve destination directory name for the provided Expression '%s'.\",\n\t\t\t\t\tthis.destinationDirectoryExpression.getExpressionString()));",
      "right" : "Assert.hasText(destinationDirectoryPath, String.format(\n\t\t\t\t\t\"Unable to resolve destination directory name for the provided Expression '%s'.\",\n\t\t\t\t\tthis.destinationDirectoryExpression.getExpressionString()));",
      "info" : "ExpressionStatement[20256-20464]:ExpressionStatement[20794-21002]"
    }, {
      "left" : "destinationDirectory = new File(destinationDirectoryPath);",
      "right" : "destinationDirectory = new File(destinationDirectoryPath);",
      "info" : "ExpressionStatement[20468-20526]:ExpressionStatement[21006-21064]"
    }, {
      "left" : "if (destinationDirectoryToUse instanceof File)",
      "right" : "if (destinationDirectoryToUse instanceof File)",
      "info" : "IfStatement[20538-20888]:IfStatement[21076-21428]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[20585-20650]:Block[21123-21188]"
    }, {
      "left" : "destinationDirectory = (File) destinationDirectoryToUse;",
      "right" : "destinationDirectory = (File) destinationDirectoryToUse;",
      "info" : "ExpressionStatement[20590-20646]:ExpressionStatement[21128-21184]"
    }, {
      "left" : "{}",
      "right" : "{}",
      "info" : "Block[20656-20888]:Block[21196-21428]"
    }, {
      "left" : "throw new IllegalStateException(String.format(\"The provided \" +\n\t\t\t\t\t\"destinationDirectoryExpression (%s) must be of type \" +\n\t\t\t\t\t\"java.io.File or be a String.\", this.destinationDirectoryExpression.getExpressionString()));",
      "right" : "throw new IllegalStateException(String.format(\"The provided \" +\n\t\t\t\t\t\"destinationDirectoryExpression (%s) must be of type \" +\n\t\t\t\t\t\"java.io.File or be a String.\", this.destinationDirectoryExpression.getExpressionString()));",
      "info" : "ThrowStatement[20661-20884]:ThrowStatement[21201-21424]"
    }, {
      "left" : "validateDestinationDirectory(destinationDirectory, this.autoCreateDirectory);",
      "right" : "validateDestinationDirectory(destinationDirectory, this.autoCreateDirectory);",
      "info" : "ExpressionStatement[20892-20969]:ExpressionStatement[21432-21509]"
    }, {
      "left" : "return destinationDirectory;",
      "right" : "return destinationDirectory;",
      "info" : "ReturnStatement[20972-21000]:ReturnStatement[21512-21540]"
    } ]
  },
  "interFileMappings" : { }
}